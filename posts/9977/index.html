<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>MySQL | LF_Techの博客</title><meta name="description" content="数据库概念 数据库的英文单词： DataBase 简称 ： DB    什么数据库？  存储数据的仓库 本质上是一个文件系统，还是以文件的方式存在服务器的电脑上的。 所有的关系型数据库都可以使用通用的SQL语句进行管理 DBMS DataBase Management System   常见数据库排行榜  数据库的特点： 持久化存储数据的。其实数据库就是一个文件系统 方便存储和管理数据 使用了统一"><meta name="keywords" content="MySQL"><meta name="author" content="LF_Tech"><meta name="copyright" content="LF_Tech"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://feiliutech.github.io/posts/9977/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta property="og:type" content="article"><meta property="og:title" content="MySQL"><meta property="og:url" content="https://feiliutech.github.io/posts/9977/"><meta property="og:site_name" content="LF_Techの博客"><meta property="og:description" content="数据库概念 数据库的英文单词： DataBase 简称 ： DB    什么数据库？  存储数据的仓库 本质上是一个文件系统，还是以文件的方式存在服务器的电脑上的。 所有的关系型数据库都可以使用通用的SQL语句进行管理 DBMS DataBase Management System   常见数据库排行榜  数据库的特点： 持久化存储数据的。其实数据库就是一个文件系统 方便存储和管理数据 使用了统一"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201112154916.jpg"><meta property="article:published_time" content="2020-11-18T12:05:29.000Z"><meta property="article:modified_time" content="2020-11-29T03:26:59.093Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="prev" title="JDBC" href="https://feiliutech.github.io/posts/23591/"><link rel="next" title="Java注解" href="https://feiliutech.github.io/posts/28665/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: true    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-11-29 11:26:59'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/css/flink.min.css"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201112154916.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">26</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">30</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">15</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 媒体</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/bangumis/"><i class="fa-fw fab fa-youtube"></i><span> 番剧</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/box/"><i class="fa-fw fab fa-xbox"></i><span> 聚宝盒</span></a></div><div class="menus_item"><a class="site-page" href="/talk/"><i class="fa-fw far fa-comment"></i><span> 微语</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw far fa-image"></i><span> 相册</span></a></li><li><a class="site-page" href="/home/"><i class="fa-fw fab fa-phoenix-framework"></i><span> 主页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#数据库"><span class="toc-number">1.</span> <span class="toc-text">数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#概念"><span class="toc-number">1.1.</span> <span class="toc-text">概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么数据库？"><span class="toc-number">1.1.1.</span> <span class="toc-text">什么数据库？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常见数据库排行榜"><span class="toc-number">1.1.2.</span> <span class="toc-text">常见数据库排行榜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库的特点："><span class="toc-number">1.1.3.</span> <span class="toc-text">数据库的特点：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL数据库软件"><span class="toc-number">1.2.</span> <span class="toc-text">MySQL数据库软件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#安装"><span class="toc-number">1.2.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#卸载"><span class="toc-number">1.2.2.</span> <span class="toc-text">卸载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置"><span class="toc-number">1.2.3.</span> <span class="toc-text">配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MySQL服务启动"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">MySQL服务启动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MySQL登录"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">MySQL登录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MySQL退出"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">MySQL退出</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL目录结构"><span class="toc-number">1.3.</span> <span class="toc-text">MySQL目录结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL安装目录："><span class="toc-number">1.3.1.</span> <span class="toc-text">MySQL安装目录：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL数据目录："><span class="toc-number">1.3.2.</span> <span class="toc-text">MySQL数据目录：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL"><span class="toc-number">2.</span> <span class="toc-text">SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL概述"><span class="toc-number">2.1.</span> <span class="toc-text">SQL概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是SQL？"><span class="toc-number">2.1.1.</span> <span class="toc-text">什么是SQL？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL通用语法"><span class="toc-number">2.1.2.</span> <span class="toc-text">SQL通用语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL分类"><span class="toc-number">2.1.3.</span> <span class="toc-text">SQL分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DDL-操作数据库、表"><span class="toc-number">2.2.</span> <span class="toc-text">DDL: 操作数据库、表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-操作数据库：CRUD"><span class="toc-number">2.2.1.</span> <span class="toc-text">1. 操作数据库：CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-C-Create-创建"><span class="toc-number">2.2.1.1.</span> <span class="toc-text">1.1 C(Create):创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-R-Retrieve-：查询"><span class="toc-number">2.2.1.2.</span> <span class="toc-text">1.2 R(Retrieve)：查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-U-Update-修改"><span class="toc-number">2.2.1.3.</span> <span class="toc-text">1.3 U(Update):修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-D-Delete-删除"><span class="toc-number">2.2.1.4.</span> <span class="toc-text">1.4 D(Delete):删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-使用数据库"><span class="toc-number">2.2.1.5.</span> <span class="toc-text">1.5 使用数据库</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-操作表"><span class="toc-number">2.2.2.</span> <span class="toc-text">2. 操作表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-C-Create-创建"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">2.1 C(Create):创建</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#语法："><span class="toc-number">2.2.2.1.1.</span> <span class="toc-text">语法：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#数据库类型："><span class="toc-number">2.2.2.1.2.</span> <span class="toc-text">数据库类型：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-R-Retrieve-：查询"><span class="toc-number">2.2.2.2.</span> <span class="toc-text">2.2 R(Retrieve)：查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-U-Update-修改"><span class="toc-number">2.2.2.3.</span> <span class="toc-text">2.3 U(Update):修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-D-Delete-删除"><span class="toc-number">2.2.2.4.</span> <span class="toc-text">2.4 D(Delete):删除</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML：增删改表中数据"><span class="toc-number">2.3.</span> <span class="toc-text">DML：增删改表中数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-添加数据："><span class="toc-number">2.3.1.</span> <span class="toc-text">1. 添加数据：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#语法"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#插入全部字段"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">插入全部字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#插入部分数据"><span class="toc-number">2.3.1.3.</span> <span class="toc-text">插入部分数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-删除数据："><span class="toc-number">2.3.2.</span> <span class="toc-text">2. 删除数据：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-修改数据："><span class="toc-number">2.3.3.</span> <span class="toc-text">3. 修改数据：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#语法：-1"><span class="toc-number">2.3.3.1.</span> <span class="toc-text">语法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#不带条件修改数据"><span class="toc-number">2.3.3.2.</span> <span class="toc-text">不带条件修改数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#带条件修改数据"><span class="toc-number">2.3.3.3.</span> <span class="toc-text">带条件修改数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#示例："><span class="toc-number">2.3.3.4.</span> <span class="toc-text">示例：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DQL：查询表中的记录"><span class="toc-number">2.4.</span> <span class="toc-text">DQL：查询表中的记录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#语法：-2"><span class="toc-number">2.4.1.</span> <span class="toc-text">语法：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基础查询"><span class="toc-number">2.4.2.</span> <span class="toc-text">基础查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#条件查询"><span class="toc-number">2.4.3.</span> <span class="toc-text">条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#案例"><span class="toc-number">2.4.3.1.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#排序查询"><span class="toc-number">2.4.4.</span> <span class="toc-text">排序查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#语法：order-by-子句"><span class="toc-number">2.4.4.1.</span> <span class="toc-text">语法：order by 子句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#排序方式："><span class="toc-number">2.4.4.2.</span> <span class="toc-text">排序方式：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#聚合函数："><span class="toc-number">2.4.5.</span> <span class="toc-text">聚合函数：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分组查询"><span class="toc-number">2.4.6.</span> <span class="toc-text">分组查询:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#语法：group-by-分组字段；"><span class="toc-number">2.4.6.1.</span> <span class="toc-text">语法：group by 分组字段；</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#案例："><span class="toc-number">2.4.6.2.</span> <span class="toc-text">案例：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分页查询"><span class="toc-number">2.4.7.</span> <span class="toc-text">分页查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#语法-1"><span class="toc-number">2.4.7.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#公式"><span class="toc-number">2.4.7.2.</span> <span class="toc-text">公式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#案例-1"><span class="toc-number">2.4.7.3.</span> <span class="toc-text">案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DCL-Data-Control-Language"><span class="toc-number">2.5.</span> <span class="toc-text">DCL(Data Control Language)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL分类："><span class="toc-number">2.5.1.</span> <span class="toc-text">SQL分类：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#管理用户"><span class="toc-number">2.5.2.</span> <span class="toc-text">管理用户</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-添加用户："><span class="toc-number">2.5.2.1.</span> <span class="toc-text">1. 添加用户：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-删除用户"><span class="toc-number">2.5.2.2.</span> <span class="toc-text">2. 删除用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-修改用户密码："><span class="toc-number">2.5.2.3.</span> <span class="toc-text">3. 修改用户密码：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-查询用户："><span class="toc-number">2.5.2.4.</span> <span class="toc-text">4. 查询用户：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#权限管理："><span class="toc-number">2.5.3.</span> <span class="toc-text">权限管理：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#约束"><span class="toc-number">3.</span> <span class="toc-text">约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#概念-1"><span class="toc-number">3.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分类："><span class="toc-number">3.2.</span> <span class="toc-text">分类：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#非空约束：not-null，值不能为null"><span class="toc-number">3.2.1.</span> <span class="toc-text">非空约束：not null，值不能为null</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建表时添加约束"><span class="toc-number">3.2.1.1.</span> <span class="toc-text">创建表时添加约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建表完后，添加非空约束"><span class="toc-number">3.2.1.2.</span> <span class="toc-text">创建表完后，添加非空约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建表完后删除name的非空约束"><span class="toc-number">3.2.1.3.</span> <span class="toc-text">创建表完后删除name的非空约束</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#唯一约束：unique，值不能重复"><span class="toc-number">3.2.2.</span> <span class="toc-text">唯一约束：unique，值不能重复</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建表时，添加唯一约束"><span class="toc-number">3.2.2.1.</span> <span class="toc-text">创建表时，添加唯一约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建完后-删除唯一约束"><span class="toc-number">3.2.2.2.</span> <span class="toc-text">创建完后,删除唯一约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建表后，添加唯一约束"><span class="toc-number">3.2.2.3.</span> <span class="toc-text">创建表后，添加唯一约束</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#主键约束：primary-key"><span class="toc-number">3.2.3.</span> <span class="toc-text">主键约束：primary key</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#特点"><span class="toc-number">3.2.3.1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#疑问"><span class="toc-number">3.2.3.2.</span> <span class="toc-text">疑问</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#在创建表时，添加主键约束"><span class="toc-number">3.2.3.3.</span> <span class="toc-text">在创建表时，添加主键约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除主键"><span class="toc-number">3.2.3.4.</span> <span class="toc-text">删除主键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建完表后，添加主键"><span class="toc-number">3.2.3.5.</span> <span class="toc-text">创建完表后，添加主键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自动增长AUTO-INCREMENT："><span class="toc-number">3.2.3.6.</span> <span class="toc-text">自动增长AUTO_INCREMENT：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#修改自增长的默认值起始值"><span class="toc-number">3.2.3.6.1.</span> <span class="toc-text">修改自增长的默认值起始值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#在创建表时，添加主键约束，并且完成主键自增长"><span class="toc-number">3.2.3.6.2.</span> <span class="toc-text">在创建表时，添加主键约束，并且完成主键自增长</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#创建完后删除自动增长"><span class="toc-number">3.2.3.6.3.</span> <span class="toc-text">创建完后删除自动增长</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#创建完之后添加自动增长"><span class="toc-number">3.2.3.6.4.</span> <span class="toc-text">创建完之后添加自动增长</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#外键约束：foreign-key"><span class="toc-number">3.2.4.</span> <span class="toc-text">外键约束：foreign key</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#单表的缺点"><span class="toc-number">3.2.4.1.</span> <span class="toc-text">单表的缺点</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#数据表的缺点"><span class="toc-number">3.2.4.1.1.</span> <span class="toc-text">数据表的缺点:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#解决方案"><span class="toc-number">3.2.4.1.2.</span> <span class="toc-text">解决方案:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#存在的问题："><span class="toc-number">3.2.4.2.</span> <span class="toc-text">存在的问题：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#目标"><span class="toc-number">3.2.4.3.</span> <span class="toc-text">目标:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#解决方式"><span class="toc-number">3.2.4.4.</span> <span class="toc-text">解决方式:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是外键约束"><span class="toc-number">3.2.4.5.</span> <span class="toc-text">什么是外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#什么是外键："><span class="toc-number">3.2.4.5.1.</span> <span class="toc-text">什么是外键：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#什么是主表："><span class="toc-number">3.2.4.5.2.</span> <span class="toc-text">什么是主表：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#什么是从表："><span class="toc-number">3.2.4.5.3.</span> <span class="toc-text">什么是从表：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建约束的语法"><span class="toc-number">3.2.4.6.</span> <span class="toc-text">创建约束的语法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#在创建表时，可以添加外键"><span class="toc-number">3.2.4.6.1.</span> <span class="toc-text">在创建表时，可以添加外键</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#创建表之后，删除外键"><span class="toc-number">3.2.4.6.2.</span> <span class="toc-text">创建表之后，删除外键</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#创建表之后，添加外键"><span class="toc-number">3.2.4.6.3.</span> <span class="toc-text">创建表之后，添加外键</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#外键的级联操作"><span class="toc-number">3.2.4.7.</span> <span class="toc-text">外键的级联操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#新的问题："><span class="toc-number">3.2.4.7.1.</span> <span class="toc-text">新的问题：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#什么是级联操作："><span class="toc-number">3.2.4.7.2.</span> <span class="toc-text">什么是级联操作：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#添加级联操作语法"><span class="toc-number">3.2.4.7.3.</span> <span class="toc-text">添加级联操作语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#分类：-1"><span class="toc-number">3.2.4.7.4.</span> <span class="toc-text">分类：</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据库的设计"><span class="toc-number">4.</span> <span class="toc-text">数据库的设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#多表之间的关系"><span class="toc-number">4.1.</span> <span class="toc-text">多表之间的关系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#分类：-2"><span class="toc-number">4.1.1.</span> <span class="toc-text">分类：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#实现关系："><span class="toc-number">4.1.2.</span> <span class="toc-text">实现关系：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#一对多关系案例"><span class="toc-number">4.1.3.</span> <span class="toc-text">一对多关系案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#需求："><span class="toc-number">4.1.3.1.</span> <span class="toc-text">需求：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分析："><span class="toc-number">4.1.3.2.</span> <span class="toc-text">分析：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#具体实现："><span class="toc-number">4.1.3.3.</span> <span class="toc-text">具体实现：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多对多关系案例"><span class="toc-number">4.1.4.</span> <span class="toc-text">多对多关系案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#需求：-1"><span class="toc-number">4.1.4.1.</span> <span class="toc-text">需求：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分析：-1"><span class="toc-number">4.1.4.2.</span> <span class="toc-text">分析：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#具体实现：-1"><span class="toc-number">4.1.4.3.</span> <span class="toc-text">具体实现：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库设计的范式"><span class="toc-number">4.2.</span> <span class="toc-text">数据库设计的范式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#概念："><span class="toc-number">4.2.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分类：-3"><span class="toc-number">4.2.2.</span> <span class="toc-text">分类：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-第一范式（1NF）："><span class="toc-number">4.2.2.1.</span> <span class="toc-text">1.第一范式（1NF）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-第二范式（2NF）："><span class="toc-number">4.2.2.2.</span> <span class="toc-text">2.第二范式（2NF）：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#几个概念："><span class="toc-number">4.2.2.2.1.</span> <span class="toc-text">几个概念：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-第三范式（3NF）："><span class="toc-number">4.2.2.3.</span> <span class="toc-text">3.第三范式（3NF）：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#多表查询："><span class="toc-number">5.</span> <span class="toc-text">多表查询：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#查询语法："><span class="toc-number">5.1.</span> <span class="toc-text">查询语法：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#准备sql"><span class="toc-number">5.2.</span> <span class="toc-text">准备sql</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#笛卡尔积："><span class="toc-number">5.3.</span> <span class="toc-text">笛卡尔积：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#如何清除笛卡尔积现象的影响"><span class="toc-number">5.3.1.</span> <span class="toc-text">如何清除笛卡尔积现象的影响</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#多表查询的分类："><span class="toc-number">5.4.</span> <span class="toc-text">多表查询的分类：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-内连接查询："><span class="toc-number">5.4.1.</span> <span class="toc-text">1. 内连接查询：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-隐式内连接："><span class="toc-number">5.4.1.1.</span> <span class="toc-text">1.1 隐式内连接：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-显式内连接："><span class="toc-number">5.4.1.2.</span> <span class="toc-text">1.2 显式内连接：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-内连接查询步骤："><span class="toc-number">5.4.1.3.</span> <span class="toc-text">1.3. 内连接查询步骤：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-外链接查询："><span class="toc-number">5.4.2.</span> <span class="toc-text">2. 外链接查询：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-左外连接："><span class="toc-number">5.4.2.1.</span> <span class="toc-text">2.1 左外连接：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-右外连接："><span class="toc-number">5.4.2.2.</span> <span class="toc-text">2.2 右外连接：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-子查询："><span class="toc-number">5.4.3.</span> <span class="toc-text">3. 子查询：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是子查询"><span class="toc-number">5.4.3.1.</span> <span class="toc-text">什么是子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#概念：-1"><span class="toc-number">5.4.3.2.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#子查询三种情况"><span class="toc-number">5.4.3.3.</span> <span class="toc-text">子查询三种情况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#子查询小结"><span class="toc-number">5.4.3.4.</span> <span class="toc-text">子查询小结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多表查询练习"><span class="toc-number">5.4.3.5.</span> <span class="toc-text">多表查询练习</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#数据准备"><span class="toc-number">5.4.3.5.1.</span> <span class="toc-text">数据准备</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#事务"><span class="toc-number">6.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#事务的基本介绍"><span class="toc-number">6.1.</span> <span class="toc-text">事务的基本介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是事务："><span class="toc-number">6.1.1.</span> <span class="toc-text">什么是事务：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#操作："><span class="toc-number">6.1.2.</span> <span class="toc-text">操作：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#例子：转账的操作"><span class="toc-number">6.1.3.</span> <span class="toc-text">例子：转账的操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#数据准备-1"><span class="toc-number">6.1.3.1.</span> <span class="toc-text">数据准备</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#模拟操作"><span class="toc-number">6.1.3.2.</span> <span class="toc-text">模拟操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务提交的两种方式："><span class="toc-number">6.1.4.</span> <span class="toc-text">事务提交的两种方式：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#手动提交事务的SQL语句"><span class="toc-number">6.1.4.1.</span> <span class="toc-text">手动提交事务的SQL语句</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#手动提交事务使用过程"><span class="toc-number">6.1.4.1.1.</span> <span class="toc-text">手动提交事务使用过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#案例演示1：事务提交"><span class="toc-number">6.1.4.1.2.</span> <span class="toc-text">案例演示1：事务提交</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#案例演示2：事务回滚"><span class="toc-number">6.1.4.1.3.</span> <span class="toc-text">案例演示2：事务回滚</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#总结："><span class="toc-number">6.1.4.1.4.</span> <span class="toc-text">总结：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自动提交事务"><span class="toc-number">6.1.4.2.</span> <span class="toc-text">自动提交事务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改事务的默认提交方式："><span class="toc-number">6.1.4.3.</span> <span class="toc-text">修改事务的默认提交方式：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务原理"><span class="toc-number">6.1.5.</span> <span class="toc-text">事务原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#原理图："><span class="toc-number">6.1.5.1.</span> <span class="toc-text">原理图：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#事务的步骤："><span class="toc-number">6.1.5.2.</span> <span class="toc-text">事务的步骤：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#回滚点"><span class="toc-number">6.1.6.</span> <span class="toc-text">回滚点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是回滚点"><span class="toc-number">6.1.6.1.</span> <span class="toc-text">什么是回滚点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#回滚点的操作语句"><span class="toc-number">6.1.6.2.</span> <span class="toc-text">回滚点的操作语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#具体操作："><span class="toc-number">6.1.6.3.</span> <span class="toc-text">具体操作：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#总结：-1"><span class="toc-number">6.1.6.4.</span> <span class="toc-text">总结：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事务的四大特征："><span class="toc-number">6.2.</span> <span class="toc-text">事务的四大特征：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事务的隔离级别（了解）"><span class="toc-number">6.3.</span> <span class="toc-text">事务的隔离级别（了解）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#概念：-2"><span class="toc-number">6.3.1.</span> <span class="toc-text">概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#存在问题："><span class="toc-number">6.3.2.</span> <span class="toc-text">存在问题：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#隔离级别："><span class="toc-number">6.3.3.</span> <span class="toc-text">隔离级别：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#演示："><span class="toc-number">6.3.4.</span> <span class="toc-text">演示：</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201112161213.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">LF_Techの博客</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 媒体</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/bangumis/"><i class="fa-fw fab fa-youtube"></i><span> 番剧</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/box/"><i class="fa-fw fab fa-xbox"></i><span> 聚宝盒</span></a></div><div class="menus_item"><a class="site-page" href="/talk/"><i class="fa-fw far fa-comment"></i><span> 微语</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw far fa-image"></i><span> 相册</span></a></li><li><a class="site-page" href="/home/"><i class="fa-fw fab fa-phoenix-framework"></i><span> 主页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">MySQL</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-11-18 20:05:29"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-11-18</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-11-29 11:26:59"><i class="fas fa-history fa-fw"></i> 更新于 2020-11-29</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/MySQL/">MySQL</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><blockquote>
<p>数据库的英文单词： DataBase 简称 ： DB</p>
</blockquote>
<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201128173331.png" style="zoom:67%;" />

<h3 id="什么数据库？"><a href="#什么数据库？" class="headerlink" title="什么数据库？"></a>什么数据库？</h3><blockquote>
<ol>
<li>存储数据的仓库</li>
<li>本质上是一个文件系统，还是以文件的方式存在服务器的电脑上的。</li>
<li>所有的关系型数据库都可以使用通用的SQL语句进行管理 DBMS DataBase Management System</li>
</ol>
</blockquote>
<h3 id="常见数据库排行榜"><a href="#常见数据库排行榜" class="headerlink" title="常见数据库排行榜"></a>常见数据库排行榜</h3><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201128173729.png" style="zoom: 50%;" />

<h3 id="数据库的特点："><a href="#数据库的特点：" class="headerlink" title="数据库的特点："></a>数据库的特点：</h3><ol>
<li>持久化存储数据的。其实数据库就是一个文件系统</li>
<li>方便存储和管理数据</li>
<li>使用了统一的方式操作数据库 – SQL</li>
</ol>
<h2 id="MySQL数据库软件"><a href="#MySQL数据库软件" class="headerlink" title="MySQL数据库软件"></a>MySQL数据库软件</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>参见《MySQL基础.pdf》</p>
<h3 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h3><ol>
<li><p>去<code>mysql</code>的安装目录找到<code>my.ini</code>文件</p>
<p>复制 <code>datadir=&quot;C:/ProgramData/MySQL/MySQL Server 5.5/Data/&quot;</code></p>
</li>
<li><p>卸载<code>MySQL</code></p>
<ul>
<li><p>停止window的MySQL服务。 找到“控制面板”-&gt; “管理工具”-&gt; “服务”，停止MySQL后台服务</p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201119112539.png" alt=""></p>
</li>
<li><p>卸载MySQL安装程序。找到“控制面板”-&gt; “程序和功能”，卸载MySQL程序</p>
</li>
</ul>
</li>
<li><p>删除<code>C:/ProgramData</code>目录下的<code>MySQL</code>文件夹。</p>
</li>
</ol>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="MySQL服务启动"><a href="#MySQL服务启动" class="headerlink" title="MySQL服务启动"></a>MySQL服务启动</h4><ol>
<li>手动。</li>
<li><code>cmd</code>–&gt; <code>services.msc</code> 打开服务的窗口</li>
<li>使用管理员权限打开`cmd``<ul>
<li><code>net start mysql</code> : 启动mysql的服务          </li>
<li><code>net stop mysql</code>: 关闭mysql服务</li>
</ul>
</li>
</ol>
<h4 id="MySQL登录"><a href="#MySQL登录" class="headerlink" title="MySQL登录"></a>MySQL登录</h4><ol>
<li><code>mysql -uroot -p密码</code></li>
<li><code>mysql -hip -uroot -p</code>连接目标的密码</li>
<li><code>mysql --host=ip --user=root --password=连接目标的密码</code></li>
</ol>
<h4 id="MySQL退出"><a href="#MySQL退出" class="headerlink" title="MySQL退出"></a>MySQL退出</h4><ul>
<li><code>net start mysql</code> : 启动mysql的服务          </li>
<li><code>net stop mysql</code>: 关闭mysql服务</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201119114843.png" alt=""></p>
<p><strong>注意：</strong>如果出现mysql’不是内部或外部命令,也不是可运行的程序</p>
<p><strong>解决：</strong>在Windows平台下，需要将mysql路径添加到环境变量中，</p>
<ol>
<li><p>右键点击“我的电脑”－“属性”－“高级”－“环境变量”－“系统 变量”－双击“Path”</p>
</li>
<li><p>将mysql安装目录下的bin目录添加到环境变量中</p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201119114422.png" alt=""></p>
</li>
</ol>
<h2 id="MySQL目录结构"><a href="#MySQL目录结构" class="headerlink" title="MySQL目录结构"></a>MySQL目录结构</h2><h3 id="MySQL安装目录："><a href="#MySQL安装目录：" class="headerlink" title="MySQL安装目录："></a>MySQL安装目录：</h3><p><code>basedir=G:/mysql-5.7.29-winx64</code></p>
<p>配置文件 <code>my.ini</code></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201119130111.png" alt=""></p>
<h3 id="MySQL数据目录："><a href="#MySQL数据目录：" class="headerlink" title="MySQL数据目录："></a>MySQL数据目录：</h3><p><code>datadir=G:/mysql-5.7.29-winx64/data</code></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201119130226.bmp" alt=""></p>
<hr>
<h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><h2 id="SQL概述"><a href="#SQL概述" class="headerlink" title="SQL概述"></a>SQL概述</h2><h3 id="什么是SQL？"><a href="#什么是SQL？" class="headerlink" title="什么是SQL？"></a>什么是SQL？</h3><blockquote>
<p>Structured Query Language：结构化查询语言<br>其实就是定义了操作所有关系型数据库的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”。</p>
</blockquote>
<h3 id="SQL通用语法"><a href="#SQL通用语法" class="headerlink" title="SQL通用语法"></a>SQL通用语法</h3><ol>
<li>SQL 语句可以<code>单行</code>或<code>多行</code>书写，以<code>分号</code>结尾。</li>
<li>可使用空格和缩进来增强语句的可读性。</li>
<li>MySQL 数据库的 SQL 语句<code>不区分大小写</code>，关键字<code>建议使用大写</code>。</li>
<li>3 种注释<ul>
<li>单行注释: <code>-- 注释内容</code>(注意–后有空格) 或 <code># 注释内容</code>(mysql 特有) </li>
<li>多行注释: <code>/* 注释 */</code></li>
</ul>
</li>
</ol>
<h3 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h3><p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201119130333.bmp" alt=""></p>
<ol>
<li><code>DDL(Data Definition Language)</code>数据定义语言<br>用来定义数据库对象：数据库，表，列等。关键字：<code>create</code>, <code>drop</code>,<code>alter</code> 等</li>
<li><code>DML(Data Manipulation Language)</code>数据操作语言<br>用来对数据库中表的数据进行增删改。关键字：<code>insert</code>, <code>delete</code>, <code>update</code> 等</li>
<li><code>DQL(Data Query Language)</code>数据查询语言<br>用来查询数据库中表的记录(数据)。关键字：<code>select</code>, <code>where</code> 等</li>
<li><code>DCL(Data Control Language)</code>数据控制语言(了解)<br>用来定义数据库的访问权限和安全级别，及创建用户。关键字：<code>GRANT</code>， <code>REVOKE</code>等</li>
</ol>
<h2 id="DDL-操作数据库、表"><a href="#DDL-操作数据库、表" class="headerlink" title="DDL: 操作数据库、表"></a>DDL: 操作数据库、表</h2><h3 id="1-操作数据库：CRUD"><a href="#1-操作数据库：CRUD" class="headerlink" title="1. 操作数据库：CRUD"></a>1. 操作数据库：CRUD</h3><h4 id="1-1-C-Create-创建"><a href="#1-1-C-Create-创建" class="headerlink" title="1.1 C(Create):创建"></a>1.1 C(Create):创建</h4><ul>
<li><p>创建数据库：<code>create database 数据库名称;</code></p>
</li>
<li><p>创建数据库，判断不存在，再创建：<code>create database if not exists 数据库名称;</code></p>
</li>
<li><p>创建数据库，并指定字符集 : <code>create database 数据库名称 character set 字符集名;</code></p>
</li>
</ul>
<ul>
<li><p>练习： 创建db4数据库，判断是否存在，并制定字符集为<code>gbk</code></p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> db4 <span class="built_in">character</span> <span class="keyword">set</span> gbk;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="1-2-R-Retrieve-：查询"><a href="#1-2-R-Retrieve-：查询" class="headerlink" title="1.2 R(Retrieve)：查询"></a>1.2 R(Retrieve)：查询</h4><ul>
<li><p>查询所有数据库的名称: <code>show databases;</code></p>
</li>
<li><p>查询某个数据库的字符集:查询某个数据库的创建语句: <code>show create database 数据库名称;</code></p>
</li>
</ul>
<p><strong>示例：</strong><br><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201119134340.png" alt=""></p>
<h4 id="1-3-U-Update-修改"><a href="#1-3-U-Update-修改" class="headerlink" title="1.3 U(Update):修改"></a>1.3 U(Update):修改</h4><p>修改数据库的字符集:<code>alter database 数据库名称 character set 字符集名称;</code></p>
<h4 id="1-4-D-Delete-删除"><a href="#1-4-D-Delete-删除" class="headerlink" title="1.4 D(Delete):删除"></a>1.4 D(Delete):删除</h4><ul>
<li><p>删除数据库: <code>drop database 数据库名称;</code></p>
</li>
<li><p>判断数据库存在，存在再删除: <code>drop database if exists 数据库名称;</code></p>
</li>
</ul>
<h4 id="1-5-使用数据库"><a href="#1-5-使用数据库" class="headerlink" title="1.5 使用数据库"></a>1.5 使用数据库</h4><ul>
<li><p>查询当前正在使用的数据库名称：<code>select database();</code></p>
</li>
<li><p>使用数据库 :<code>use 数据库名称;</code></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201119140150.png" alt=""></p>
</li>
</ul>
<h3 id="2-操作表"><a href="#2-操作表" class="headerlink" title="2. 操作表"></a>2. 操作表</h3><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201129112550.png" style="zoom: 67%;" />

<h4 id="2-1-C-Create-创建"><a href="#2-1-C-Create-创建" class="headerlink" title="2.1 C(Create):创建"></a>2.1 C(Create):创建</h4><h5 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(</span><br><span class="line">   列名<span class="number">1</span> 数据类型<span class="number">1</span>,</span><br><span class="line">   列名<span class="number">2</span> 数据类型<span class="number">2</span>,</span><br><span class="line">   ....</span><br><span class="line">   列名n 数据类型n</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>注意：最后一列，不需要加<code>逗号&#39;,&#39;</code></strong></p>
<h5 id="数据库类型："><a href="#数据库类型：" class="headerlink" title="数据库类型："></a>数据库类型：</h5><ol>
<li><p><code>int</code>：整数类型 ; 如<code>age int</code></p>
</li>
<li><p><code>double</code>:小数类型; 如<code>score double(5,2)</code></p>
</li>
<li><p><code>date</code>:日期，只包含年月日:<code>yyyy-MM-dd</code></p>
</li>
<li><p><code>datetime</code>:日期，包含年月日时分秒 :<code>yyyy-MM-dd HH:mm:ss</code></p>
</li>
<li><p><code>timestamp</code>:时间戳类型，包含年月日时分秒：<code>yyyy-MM-dd HH:mm:ss</code>    </p>
<p><strong>注意：</strong>如果将来不给这个字段赋值，或赋值为<code>null</code>，则默认使用当前的<code>系统时间</code>，来自动赋值</p>
</li>
<li><p><code>varchar</code>：字符串</p>
<ul>
<li><p><code>name varchar(20)</code>:姓名最大20个字符</p>
<p>注意：zhangsan 8个字符  张三 2个字符</p>
</li>
</ul>
</li>
</ol>
<p><strong>创建表：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">int</span>,</span><br><span class="line">  <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">32</span>),</span><br><span class="line">  age <span class="built_in">int</span> ,</span><br><span class="line">  score <span class="keyword">double</span>(<span class="number">4</span>,<span class="number">1</span>),</span><br><span class="line">  birthday <span class="built_in">date</span>,</span><br><span class="line">  insert_time <span class="built_in">timestamp</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>复制表：</strong><code>create table 表名 like 被复制的表名;</code>          </p>
<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201119142901.png" style="zoom:80%;" />

<h4 id="2-2-R-Retrieve-：查询"><a href="#2-2-R-Retrieve-：查询" class="headerlink" title="2.2 R(Retrieve)：查询"></a>2.2 R(Retrieve)：查询</h4><ul>
<li>查询某个数据库中所有的表名称: <code>show tables;</code></li>
<li>查询表结构: <code>desc 表名;</code></li>
</ul>
<h4 id="2-3-U-Update-修改"><a href="#2-3-U-Update-修改" class="headerlink" title="2.3 U(Update):修改"></a>2.3 U(Update):修改</h4><ol>
<li>修改表名: <code>alter table 表名 rename to 新的表名;</code></li>
<li>修改表的字符集: <code>alter table 表名 character set 字符集名称;</code></li>
<li>添加一列: <code>alter table 表名 add 列名 数据类型;</code></li>
<li>修改列名称类型: <ul>
<li><code>alter table 表名 change 列名 新列别 新数据类型;</code></li>
<li><code>alter table 表名 modify 列名 新数据类型;</code></li>
</ul>
</li>
<li>删除列: <code>alter table 表名 drop 列名;</code></li>
</ol>
<h4 id="2-4-D-Delete-删除"><a href="#2-4-D-Delete-删除" class="headerlink" title="2.4 D(Delete):删除"></a>2.4 D(Delete):删除</h4><ul>
<li><code>drop table 表名;</code></li>
<li><code>drop table  if exists 表名 ;</code></li>
</ul>
<h2 id="DML：增删改表中数据"><a href="#DML：增删改表中数据" class="headerlink" title="DML：增删改表中数据"></a>DML：增删改表中数据</h2><h3 id="1-添加数据："><a href="#1-添加数据：" class="headerlink" title="1. 添加数据："></a>1. 添加数据：</h3><h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> [<span class="keyword">INTO</span>] 表名 [字段名] <span class="keyword">VALUES</span> (字段值)</span><br></pre></td></tr></table></figure>

<h4 id="插入全部字段"><a href="#插入全部字段" class="headerlink" title="插入全部字段"></a>插入全部字段</h4><ul>
<li><p>所有的字段名都写出来</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名(字段<span class="number">1</span>,字段<span class="number">2</span>,字段<span class="number">3</span>,...) <span class="keyword">VALUES</span>(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>,...)</span><br></pre></td></tr></table></figure>
</li>
<li><p>不写字段名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">VALUES</span>(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>,...)</span><br></pre></td></tr></table></figure>
<h4 id="插入部分数据"><a href="#插入部分数据" class="headerlink" title="插入部分数据"></a>插入部分数据</h4></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名(字段<span class="number">1</span>,字段<span class="number">2</span>,...) <span class="keyword">VALUES</span>(值<span class="number">1</span>,值<span class="number">2</span>,...)</span><br><span class="line"><span class="comment">-- 注意：没有添加的字段会使用NULL</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ol>
<li><p>列名和值要一一对应。</p>
</li>
<li><p>如果表名后不定义列名，则默认给所有列添加值</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名 <span class="keyword">values</span>(值<span class="number">1</span>,值<span class="number">2</span>,...值n);</span><br></pre></td></tr></table></figure>
</li>
<li><p>除了数字类型，其他类型需要使用引号(单双都可以)引起来</p>
</li>
</ol>
<h3 id="2-删除数据："><a href="#2-删除数据：" class="headerlink" title="2. 删除数据："></a>2. 删除数据：</h3><p><strong>语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 [<span class="keyword">where</span> 条件]</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ol>
<li>如果不加条件，则删除表中所有记录。</li>
<li>如果要删除所有记录<ul>
<li><code>delete from 表名;</code> – 不推荐使用。有多少条记录就会执行多少次删除操作</li>
<li><code>TRUNCATE TABLE 表名;</code> – 推荐使用，效率更高 ：先删除表，然后再创建一张一样的<code>空表</code>。</li>
</ul>
</li>
</ol>
<h3 id="3-修改数据："><a href="#3-修改数据：" class="headerlink" title="3. 修改数据："></a>3. 修改数据：</h3><h4 id="语法：-1"><a href="#语法：-1" class="headerlink" title="语法："></a>语法：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 列名<span class="number">1</span> = 值<span class="number">1</span>, 列名<span class="number">2</span> = 值<span class="number">2</span>,... [<span class="keyword">where</span> 条件];</span><br></pre></td></tr></table></figure>

<h4 id="不带条件修改数据"><a href="#不带条件修改数据" class="headerlink" title="不带条件修改数据"></a>不带条件修改数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">SET</span> 字段名=值; <span class="comment">-- 修改所有的行</span></span><br></pre></td></tr></table></figure>

<h4 id="带条件修改数据"><a href="#带条件修改数据" class="headerlink" title="带条件修改数据"></a>带条件修改数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">SET</span> 字段名=值 <span class="keyword">WHERE</span> 字段名=值;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ol>
<li>如果不加任何条件，则会将表中所有记录全部修改。</li>
</ol>
<h4 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 不带条件修改数据，将所有的性别改成女</span></span><br><span class="line"><span class="keyword">UPDATE</span> student <span class="keyword">SET</span> sex=<span class="string">'女'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 带条件修改数据，将id号为2的学生性别改成男</span></span><br><span class="line"><span class="keyword">UPDATE</span> student <span class="keyword">SET</span> sex=<span class="string">'男'</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 一次修改多个列，把id为3的学生，年龄改成26岁，address改成北京</span></span><br><span class="line"><span class="keyword">UPDATE</span> student <span class="keyword">SET</span> age=<span class="number">26</span>, address=<span class="string">'北京'</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>



<h2 id="DQL：查询表中的记录"><a href="#DQL：查询表中的记录" class="headerlink" title="DQL：查询表中的记录"></a>DQL：查询表中的记录</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> 表名;</span><br></pre></td></tr></table></figure>

<h3 id="语法：-2"><a href="#语法：-2" class="headerlink" title="语法："></a>语法：</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span>   字段列表</span><br><span class="line"><span class="keyword">from</span>     表名列表</span><br><span class="line"><span class="keyword">where</span>    条件列表</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> 分组字段</span><br><span class="line"><span class="keyword">having</span>   分组之后的条件</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 排序</span><br><span class="line"><span class="keyword">limit</span>    分页限定</span><br></pre></td></tr></table></figure>

<p><strong>创建学生表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student3 ( </span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span>, <span class="comment">-- 编号 </span></span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>), <span class="comment">-- 姓名 </span></span><br><span class="line">    age <span class="built_in">int</span>, <span class="comment">-- 年龄 </span></span><br><span class="line">    sex <span class="built_in">varchar</span>(<span class="number">5</span>), <span class="comment">-- 性别 </span></span><br><span class="line">    address <span class="built_in">varchar</span>(<span class="number">100</span>), <span class="comment">-- 地址 </span></span><br><span class="line">    math <span class="built_in">int</span>, <span class="comment">-- 数学 </span></span><br><span class="line">    english <span class="built_in">int</span> <span class="comment">-- 英语 ); </span></span><br><span class="line">    <span class="keyword">INSERT</span> <span class="keyword">INTO</span> student3(<span class="keyword">id</span>,<span class="keyword">NAME</span>,age,sex,address,math,english) </span><br><span class="line">    <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">'马云'</span>,<span class="number">55</span>,<span class="string">'男'</span>,<span class="string">'杭州'</span>,<span class="number">66</span>,<span class="number">78</span>),</span><br><span class="line">    (<span class="number">2</span>,<span class="string">'马化腾'</span>,<span class="number">45</span>,<span class="string">'女'</span>,<span class="string">'深圳'</span>,<span class="number">98</span>,<span class="number">87</span>),</span><br><span class="line">    (<span class="number">3</span>,<span class="string">'马景涛'</span>,<span class="number">55</span>,<span class="string">'男'</span>,<span class="string">'香港'</span>,<span class="number">56</span>,<span class="number">77</span>),</span><br><span class="line">    (<span class="number">4</span>,<span class="string">'柳岩'</span>,<span class="number">20</span>,<span class="string">'女'</span>,<span class="string">'湖南'</span>,<span class="number">76</span>,<span class="number">65</span>),</span><br><span class="line">    (<span class="number">5</span>,<span class="string">'柳青'</span>,<span class="number">20</span>,<span class="string">'男'</span>,<span class="string">'湖南'</span>,<span class="number">86</span>,<span class="literal">NULL</span>),</span><br><span class="line">    (<span class="number">6</span>,<span class="string">'刘德华'</span>,<span class="number">57</span>,<span class="string">'男'</span>,<span class="string">'香港'</span>,<span class="number">99</span>,<span class="number">99</span>),</span><br><span class="line">    (<span class="number">7</span>,<span class="string">'马德'</span>,<span class="number">22</span>,<span class="string">'女'</span>,<span class="string">'香港'</span>,<span class="number">99</span>,<span class="number">99</span>),</span><br><span class="line">    (<span class="number">8</span>,<span class="string">'德玛西亚'</span>,<span class="number">18</span>,<span class="string">'男'</span>,<span class="string">'南京'</span>,<span class="number">56</span>,<span class="number">65</span>);</span><br></pre></td></tr></table></figure>



<h3 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h3><ol>
<li><p><strong>多个字段的查询</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段名<span class="number">1</span>，字段名<span class="number">2.</span>.. <span class="keyword">from</span> 表名；</span><br></pre></td></tr></table></figure>

<p>注意：如果查询所有字段，则可以使用<code>*</code>来替代字段列表。</p>
</li>
<li><p><strong>去除重复</strong>：<code>distinct</code></p>
<p>注意结果集完全一样的列才可以去重</p>
</li>
<li><p><strong>计算列</strong></p>
<ul>
<li>一般可以使用四则运算计算一些列的值。（一般只会进行<code>数值型</code>的计算）</li>
<li><code>ifnull(表达式1,表达式2)</code>：<code>null</code>参与的运算，计算结果都为<code>null</code><ul>
<li><code>表达式1</code>：哪个字段需要判断是否为<code>null</code></li>
<li><code>表达式2</code>：如果该字段为<code>null</code>后的替换值。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>起别名</strong>：<code>as</code>，<code>as</code>也可以省略</p>
</li>
</ol>
<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><ol>
<li><p>where子句后跟条件</p>
</li>
<li><p>运算符</p>
<ul>
<li><p><code>&gt;、&lt; 、&lt;= 、&gt;= 、= 、&lt;&gt;</code></p>
</li>
<li><p><code>BETWEEN...AND</code>  </p>
</li>
<li><p><code>IN</code>( 集合) </p>
</li>
<li><p><code>LIKE</code>：模糊查询</p>
<p>占位符：</p>
<ul>
<li><code>_</code>：单个任意字符</li>
<li><code>%</code>：多个任意字符</li>
</ul>
</li>
<li><p><code>IS NULL</code>  </p>
</li>
<li><p><code>and</code>  或 <code>&amp;&amp;</code></p>
</li>
<li><p><code>or</code>  或 <code>||</code></p>
</li>
<li><p><code>not</code> 或 <code>!</code></p>
</li>
</ul>
</li>
</ol>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询年龄大于20岁</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> age&gt;=<span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.查询年龄等于20岁</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> age=<span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.查询年龄不等于20岁</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> age&lt;&gt;<span class="number">20</span> </span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> age!=<span class="number">20</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4.查询年龄大于等于20 小于等于30</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> age&gt;=<span class="number">20</span> <span class="keyword">and</span> age&lt;=<span class="number">30</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> age&gt;=<span class="number">20</span> &amp;&amp; age&lt;=<span class="number">30</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5.查询年龄22岁，18岁，25岁的信息</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> age=<span class="number">22</span> <span class="keyword">OR</span> age=<span class="number">18</span> <span class="keyword">OR</span> age=<span class="number">25</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> age <span class="keyword">IN</span> (<span class="number">22</span>,<span class="number">18</span>,<span class="number">25</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6.查询英语成绩为null</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> english= <span class="literal">NULL</span>;<span class="comment">-- 不对的，null值不能使用=（！=）判断</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> english <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7.查询英语成绩不为null</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> english <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8.查询姓马的有哪些？</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'马%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 9.查询姓名第二个字是化的人</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'_化%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 10.查询姓名是3个字的人</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'___'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 11.查询姓名中包含德的人</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'%德%'</span>;</span><br></pre></td></tr></table></figure>


<h3 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h3><h4 id="语法：order-by-子句"><a href="#语法：order-by-子句" class="headerlink" title="语法：order by 子句"></a>语法：order by 子句</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">order by 排序字段1 排序方式1 ，排序字段2 排序方式2,...</span><br></pre></td></tr></table></figure>

<h4 id="排序方式："><a href="#排序方式：" class="headerlink" title="排序方式："></a>排序方式：</h4><ul>
<li><code>ASC</code>：升序，默认的。</li>
<li><code>DESC</code>：降序。</li>
</ul>
<p><strong>注意：如果有多个排序条件，则当前边的条件值一样时，才会判断第二条件。</strong></p>
<h3 id="聚合函数："><a href="#聚合函数：" class="headerlink" title="聚合函数："></a>聚合函数：</h3><blockquote>
<p>将一列数据作为一个整体，进行纵向的计算。</p>
</blockquote>
<ol>
<li><p><code>count</code>：计算个数</p>
<ul>
<li><p>一般选择非空的列：主键</p>
</li>
<li><p><code>count(*)</code></p>
</li>
</ul>
</li>
<li><p><code>max</code>：计算最大值</p>
</li>
<li><p><code>min</code>：计算最小值</p>
</li>
<li><p><code>sum</code>：计算和</p>
</li>
<li><p><code>avg</code>：计算平均值</p>
</li>
</ol>
<p><strong>注意：</strong>聚合函数的计算，排除<code>null</code>值。<br><strong>解决方案：</strong></p>
<pre><code>1. 选择不包含非空的列进行计算
         2. `IFNULL`函数</code></pre><h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询:"></a>分组查询:</h3><h4 id="语法：group-by-分组字段；"><a href="#语法：group-by-分组字段；" class="headerlink" title="语法：group by 分组字段；"></a>语法：group by 分组字段；</h4><p>注意：</p>
<ol>
<li>分组之后查询的字段：分组字段、聚合函数</li>
<li><code>where</code> 和 <code>having</code> 的区别？<ul>
<li><code>where</code>在<code>分组之前</code>进行限定，如果不满足条件，则不参与分组。<code>having</code>在<code>分组之后</code>进行限定，如果不满足结果，则不会被查询出来</li>
<li>where 后不可以跟聚合函数，having可以进行聚合函数的判断。</li>
</ul>
</li>
</ol>
<h4 id="案例："><a href="#案例：" class="headerlink" title="案例："></a>案例：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 按照性别分组。分别查询男、女同学的平均分</span></span><br><span class="line"><span class="keyword">SELECT</span> sex, <span class="keyword">AVG</span>(score) <span class="keyword">FROM</span> student <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 按照性别分组。分别查询男、女同学的平均分,人数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(score),<span class="keyword">COUNT</span>(<span class="keyword">id</span>) <span class="keyword">FROM</span> student <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">--  按照性别分组。分别查询男、女同学的平均分,人数 要求：分数低于70分的人，不参与分组</span></span><br><span class="line"><span class="keyword">SELECT</span> sex, <span class="keyword">AVG</span>(score), <span class="keyword">COUNT</span>(<span class="keyword">id</span>) <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> score&gt;<span class="number">70</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">--  按照性别分组。分别查询男、女同学的平均分,人数 要求：分数低于70分的人，不参与分组,分组之后。人数要大于2个人</span></span><br><span class="line"><span class="keyword">SELECT</span> sex, <span class="keyword">AVG</span>(score), <span class="keyword">COUNT</span>(<span class="keyword">id</span>) <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> score&gt;<span class="number">70</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex <span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(<span class="keyword">id</span>)&gt;<span class="number">2</span>;</span><br><span class="line"><span class="comment">--或者起别名</span></span><br><span class="line"><span class="keyword">SELECT</span> sex, <span class="keyword">AVG</span>(score), <span class="keyword">COUNT</span>(<span class="keyword">id</span>) <span class="keyword">AS</span> <span class="keyword">num</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> score&gt;<span class="number">70</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex <span class="keyword">HAVING</span> <span class="keyword">num</span>&gt;<span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><h4 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">limit 开始的索引,每页查询的条数;</span><br></pre></td></tr></table></figure>

<h4 id="公式"><a href="#公式" class="headerlink" title="公式"></a>公式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">开始的索引 = （当前的页码 - <span class="number">1</span>） * 每页显示的条数</span><br></pre></td></tr></table></figure>

<h4 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 每页显示3条记录 </span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">LIMIT</span> <span class="number">0</span>,<span class="number">3</span>; <span class="comment">-- 第一页</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">LIMIT</span> <span class="number">3</span>,<span class="number">3</span>; <span class="comment">-- 第二页</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">LIMIT</span> <span class="number">6</span>,<span class="number">3</span>; <span class="comment">-- 第三页</span></span><br></pre></td></tr></table></figure>



<h2 id="DCL-Data-Control-Language"><a href="#DCL-Data-Control-Language" class="headerlink" title="DCL(Data Control Language)"></a>DCL(Data Control Language)</h2><h3 id="SQL分类："><a href="#SQL分类：" class="headerlink" title="SQL分类："></a>SQL分类：</h3><ol>
<li><code>DDL</code>：操作数据库和表</li>
<li><code>DML</code>：增删改表中数据</li>
<li><code>DQL</code>：查询表中数据</li>
<li>DCL：管理用户，授权</li>
</ol>
<p>DBA：数据库管理员</p>
<p>DCL：管理用户，授权</p>
<h3 id="管理用户"><a href="#管理用户" class="headerlink" title="管理用户"></a>管理用户</h3><h4 id="1-添加用户："><a href="#1-添加用户：" class="headerlink" title="1. 添加用户："></a>1. 添加用户：</h4><p><strong>语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'密码'</span>;</span><br></pre></td></tr></table></figure>

<h4 id="2-删除用户"><a href="#2-删除用户" class="headerlink" title="2. 删除用户"></a>2. 删除用户</h4><p><strong>语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span>;</span><br></pre></td></tr></table></figure>

<h4 id="3-修改用户密码："><a href="#3-修改用户密码：" class="headerlink" title="3. 修改用户密码："></a>3. 修改用户密码：</h4>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">USER</span> <span class="keyword">SET</span> <span class="keyword">PASSWORD</span> = <span class="keyword">PASSWORD</span>(<span class="string">'新密码'</span>) <span class="keyword">WHERE</span> <span class="keyword">USER</span> = <span class="string">'用户名'</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">USER</span> <span class="keyword">SET</span> <span class="keyword">PASSWORD</span> = <span class="keyword">PASSWORD</span>(<span class="string">'abc'</span>) <span class="keyword">WHERE</span> <span class="keyword">USER</span> = <span class="string">'lisi'</span>;</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> <span class="keyword">FOR</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span> = <span class="keyword">PASSWORD</span>(<span class="string">'新密码'</span>);</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> <span class="keyword">FOR</span> <span class="string">'root'</span>@<span class="string">'localhost'</span> = <span class="keyword">PASSWORD</span>(<span class="string">'123'</span>);</span><br></pre></td></tr></table></figure>

<p><strong>mysql中忘记了root用户的密码？</strong></p>
<ol>
<li><p><code>cmd -- &gt; net stop mysql</code>停止<code>mysql</code>服务</p>
<p>需要管理员运行该<code>cmd</code></p>
</li>
</ol>
<ol start="2">
<li><p>使用无验证方式启动mysql服务： <code>mysqld --skip-grant-tables</code></p>
</li>
<li><p>打开新的cmd窗口,直接输入mysql命令，敲回车。就可以登录成功</p>
</li>
<li><p><code>use mysql;</code></p>
</li>
<li><p><code>update user set password = password(&#39;你的新密码&#39;) where user = &#39;root&#39;;</code></p>
</li>
<li><p>关闭两个窗口</p>
</li>
<li><p>打开任务管理器，手动结束<code>mysqld.exe</code>的进程</p>
</li>
<li><p>启动mysql服务</p>
</li>
<li><p>使用新密码登录。</p>
</li>
</ol>
<h4 id="4-查询用户："><a href="#4-查询用户：" class="headerlink" title="4. 查询用户："></a>4. 查询用户：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 切换到mysql数据库</span></span><br><span class="line"><span class="keyword">USE</span> myql;</span><br><span class="line"><span class="comment">-- 2. 查询user表</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">USER</span>;</span><br><span class="line"><span class="comment">-- 通配符：% 表示可以在任意主机使用用户登录数据库</span></span><br></pre></td></tr></table></figure>

<h3 id="权限管理："><a href="#权限管理：" class="headerlink" title="权限管理："></a>权限管理：</h3><ol>
<li>查询权限：</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">-- 查询权限</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GRANTS</span> <span class="keyword">FOR</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span>;</span><br><span class="line">	<span class="keyword">SHOW</span> <span class="keyword">GRANTS</span> <span class="keyword">FOR</span> <span class="string">'lisi'</span>@<span class="string">'%'</span>;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>授予权限：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 授予权限</span></span><br><span class="line"><span class="keyword">grant</span> 权限列表 <span class="keyword">on</span> 数据库名.表名 <span class="keyword">to</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span>;</span><br><span class="line"><span class="comment">-- 给张三用户授予所有权限，在任意数据库任意表上</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'zhangsan'</span>@<span class="string">'localhost'</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>撤销权限：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 撤销权限：</span></span><br><span class="line"><span class="keyword">revoke</span> 权限列表 <span class="keyword">on</span> 数据库名.表名 <span class="keyword">from</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span>;</span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">UPDATE</span> <span class="keyword">ON</span> db3.<span class="string">`account`</span> <span class="keyword">FROM</span> <span class="string">'lisi'</span>@<span class="string">'%'</span>;</span><br></pre></td></tr></table></figure>





</li>
</ol>
<hr>
<h1 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h1><h2 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h2><blockquote>
<p>对表中的数据进行限定，保证数据的正确性、有效性和完整性。    </p>
<p>一个表如果添加了约束，不正确的数据将无法插入到表中。约束在创建表的时候添加比较合适。</p>
</blockquote>
<h2 id="分类："><a href="#分类：" class="headerlink" title="分类："></a>分类：</h2><ol>
<li><strong>主键约束</strong>：<code>primary key</code></li>
<li><strong>非空约束</strong>：<code>not null</code></li>
<li><strong>唯一约束</strong>：<code>unique</code></li>
<li><strong>外键约束</strong>：<code>foreign key</code></li>
</ol>
<h3 id="非空约束：not-null，值不能为null"><a href="#非空约束：not-null，值不能为null" class="headerlink" title="非空约束：not null，值不能为null"></a>非空约束：not null，值不能为null</h3><p><strong>什么是非空约束：</strong></p>
<blockquote>
<p>某一列不能为null。</p>
</blockquote>
<h4 id="创建表时添加约束"><a href="#创建表时添加约束" class="headerlink" title="创建表时添加约束"></a>创建表时<code>添加</code>约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stu(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span>,</span><br><span class="line">	<span class="keyword">NAME</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="comment">-- name为非空</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="创建表完后，添加非空约束"><a href="#创建表完后，添加非空约束" class="headerlink" title="创建表完后，添加非空约束"></a>创建表完后，<code>添加</code>非空约束</h4>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu <span class="keyword">MODIFY</span> <span class="keyword">NAME</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>

<h4 id="创建表完后删除name的非空约束"><a href="#创建表完后删除name的非空约束" class="headerlink" title="创建表完后删除name的非空约束"></a>创建表完后<code>删除</code>name的非空约束</h4>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu <span class="keyword">MODIFY</span> <span class="keyword">NAME</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>);</span><br></pre></td></tr></table></figure>

<h3 id="唯一约束：unique，值不能重复"><a href="#唯一约束：unique，值不能重复" class="headerlink" title="唯一约束：unique，值不能重复"></a>唯一约束：unique，值不能重复</h3><p><strong>什么是唯一约束：</strong></p>
<blockquote>
<p>表中某一列不能出现重复的值</p>
</blockquote>
<h4 id="创建表时，添加唯一约束"><a href="#创建表时，添加唯一约束" class="headerlink" title="创建表时，添加唯一约束"></a>创建表时，<code>添加</code>唯一约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stu(</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span>,</span><br><span class="line">  phone_number <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span> <span class="comment">-- 添加了唯一约束</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 注意mysql中，唯一约束限定的列的值可以有多个null</span></span><br></pre></td></tr></table></figure>

<h4 id="创建完后-删除唯一约束"><a href="#创建完后-删除唯一约束" class="headerlink" title="创建完后,删除唯一约束"></a>创建完后,<code>删除</code>唯一约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu <span class="keyword">DROP</span> <span class="keyword">INDEX</span> phone_number;</span><br></pre></td></tr></table></figure>

<h4 id="创建表后，添加唯一约束"><a href="#创建表后，添加唯一约束" class="headerlink" title="创建表后，添加唯一约束"></a>创建表后，<code>添加</code>唯一约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu <span class="keyword">MODIFY</span> phone_number <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span>;</span><br></pre></td></tr></table></figure>

<h3 id="主键约束：primary-key"><a href="#主键约束：primary-key" class="headerlink" title="主键约束：primary key"></a>主键约束：primary key</h3><p><strong>哪个字段应该作为表的主键？</strong></p>
<blockquote>
<p>通常不用业务字段作为主键，单独给每张表设计一个id的字段，把id作为主键。主键是给数据库和程序使用的，不是给最终的客户使用的。所以主键有没有含义没有关系，只要不重复，非空就行。</p>
<p>如：身份证，学号不建议做成主键</p>
</blockquote>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li>含义：<code>非空且唯一</code></li>
<li>一张表只能有一个字段为主键</li>
<li>主键就是表中记录的唯一标识</li>
</ul>
<h4 id="疑问"><a href="#疑问" class="headerlink" title="疑问"></a>疑问</h4><p><strong>如果一个字段设置了非空与唯一约束，该字段与主键的区别?</strong></p>
<ul>
<li>主键数在一个表中，只能有一个。不能出现多个主键。主键可以单列，也可以是多列。</li>
<li>自增长只能用在主键上</li>
</ul>
<h4 id="在创建表时，添加主键约束"><a href="#在创建表时，添加主键约束" class="headerlink" title="在创建表时，添加主键约束"></a>在创建表时，添加主键约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu(</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span>,<span class="comment">-- 给id添加主键约束</span></span><br><span class="line">  <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="删除主键"><a href="#删除主键" class="headerlink" title="删除主键"></a>删除主键</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 错误 alter table stu modify id int ;</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu <span class="keyword">DROP</span> PRIMARY <span class="keyword">KEY</span>;</span><br></pre></td></tr></table></figure>

<h4 id="创建完表后，添加主键"><a href="#创建完表后，添加主键" class="headerlink" title="创建完表后，添加主键"></a>创建完表后，添加主键</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu <span class="keyword">MODIFY</span> <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>;</span><br><span class="line">或者</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span>(<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure>

<h4 id="自动增长AUTO-INCREMENT："><a href="#自动增长AUTO-INCREMENT：" class="headerlink" title="自动增长AUTO_INCREMENT："></a>自动增长<code>AUTO_INCREMENT</code>：</h4><p><strong>概念：</strong></p>
<blockquote>
<p>主键如果让我们自己添加很有可能重复,我们通常希望在每次插入新记录时,数据库自动生成主键字段的值<br>如果某一列是数值类型的，使用 <code>auto_increment</code> 可以来完成值得自动增长</p>
</blockquote>
<h5 id="修改自增长的默认值起始值"><a href="#修改自增长的默认值起始值" class="headerlink" title="修改自增长的默认值起始值"></a>修改自增长的默认值起始值</h5><p>默认地<code>AUTO_INCREMENT</code>的开始值是<code>1</code>，如果希望修改起始值,请使用下列SQL语法</p>
<ol>
<li><p>创建表时指定起始值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">  列名 <span class="built_in">int</span> primary <span class="keyword">key</span> AUTO_INCREMENT</span><br><span class="line">) AUTO_INCREMENT=起始值;</span><br></pre></td></tr></table></figure>

<p><strong>示例：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 指定起始值为1000</span></span><br><span class="line"> <span class="keyword">create</span> <span class="keyword">table</span> st4 (</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line"> <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">) auto_increment = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> st4 <span class="keyword">values</span> (<span class="literal">null</span>, <span class="string">'孔明'</span>);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> st4;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建好以后修改起始值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 AUTO_INCREMENT=起始值;</span><br></pre></td></tr></table></figure>

<p><strong>示例：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> st4 auto_increment = <span class="number">2000</span>;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> st4 <span class="keyword">values</span> (<span class="literal">null</span>, <span class="string">'刘备'</span>);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h5 id="在创建表时，添加主键约束，并且完成主键自增长"><a href="#在创建表时，添加主键约束，并且完成主键自增长" class="headerlink" title="在创建表时，添加主键约束，并且完成主键自增长"></a>在创建表时，添加主键约束，并且完成主键自增长</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu(</span><br><span class="line">   <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,<span class="comment">-- 给id添加主键约束</span></span><br><span class="line">   <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>
<h5 id="创建完后删除自动增长"><a href="#创建完后删除自动增长" class="headerlink" title="创建完后删除自动增长"></a>创建完后<code>删除</code>自动增长</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu <span class="keyword">MODIFY</span> <span class="keyword">id</span> <span class="built_in">INT</span>;</span><br></pre></td></tr></table></figure>

<h5 id="创建完之后添加自动增长"><a href="#创建完之后添加自动增长" class="headerlink" title="创建完之后添加自动增长"></a>创建完之后<code>添加</code>自动增长</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stu <span class="keyword">MODIFY</span> <span class="keyword">id</span> <span class="built_in">INT</span> AUTO_INCREMENT;</span><br></pre></td></tr></table></figure>

<h3 id="外键约束：foreign-key"><a href="#外键约束：foreign-key" class="headerlink" title="外键约束：foreign key"></a>外键约束：foreign key</h3><blockquote>
<p>让表于表产生关系，从而保证数据的正确性。</p>
</blockquote>
<h4 id="单表的缺点"><a href="#单表的缺点" class="headerlink" title="单表的缺点"></a>单表的缺点</h4><p>创建一个员工表包含如下列(id, name, age, dep_name, dep_location),id主键并自动增长,添加5条数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp ( </span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT, </span><br><span class="line">	<span class="keyword">NAME</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>), </span><br><span class="line">	age <span class="built_in">INT</span>, </span><br><span class="line">	dep_name <span class="built_in">VARCHAR</span>(<span class="number">30</span>), </span><br><span class="line">	dep_location <span class="built_in">VARCHAR</span>(<span class="number">30</span>) </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加数据 </span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp (<span class="keyword">NAME</span>, age, dep_name, dep_location) <span class="keyword">VALUES</span> (<span class="string">'张三'</span>, <span class="number">20</span>, <span class="string">'研发部'</span>, <span class="string">'广州'</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp (<span class="keyword">NAME</span>, age, dep_name, dep_location) <span class="keyword">VALUES</span> (<span class="string">'李四'</span>, <span class="number">21</span>, <span class="string">'研发部'</span>, <span class="string">'广州'</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp (<span class="keyword">NAME</span>, age, dep_name, dep_location) <span class="keyword">VALUES</span> (<span class="string">'王五'</span>, <span class="number">20</span>, <span class="string">'研发部'</span>, <span class="string">'广州'</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp (<span class="keyword">NAME</span>, age, dep_name, dep_location) <span class="keyword">VALUES</span> (<span class="string">'老王'</span>, <span class="number">20</span>, <span class="string">'销售部'</span>, <span class="string">'深圳'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp (<span class="keyword">NAME</span>, age, dep_name, dep_location) <span class="keyword">VALUES</span> (<span class="string">'大王'</span>, <span class="number">22</span>, <span class="string">'销售部'</span>, <span class="string">'深圳'</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp (<span class="keyword">NAME</span>, age, dep_name, dep_location) <span class="keyword">VALUES</span> (<span class="string">'小王'</span>, <span class="number">18</span>, <span class="string">'销售部'</span>, <span class="string">'深圳'</span>);</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124155548.png" alt=""></p>
<h5 id="数据表的缺点"><a href="#数据表的缺点" class="headerlink" title="数据表的缺点:"></a>数据表的缺点:</h5><ol>
<li>数据冗余</li>
<li>后期还会出现增删改的问题</li>
</ol>
<h5 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h5><p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124155924.png" alt=""></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 解决方案：分成2张表</span></span><br><span class="line"><span class="comment">-- 创建部门表(id,dep_name,dep_location)</span></span><br><span class="line"><span class="comment">-- 一方，主表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> department(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">dep_name <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">dep_location <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 创建员工表(id,name,age,dep_id)</span></span><br><span class="line"><span class="comment">-- 多方，从表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> employee(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="built_in">int</span>,</span><br><span class="line">dep_id <span class="built_in">int</span> <span class="comment">-- 外键对应主表的主键</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">-- 添加2个部门</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> department <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">'研发部'</span>,<span class="string">'广州'</span>),(<span class="literal">null</span>, <span class="string">'销售部'</span>, <span class="string">'深圳'</span>);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> department;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加员工,dep_id表示员工所在的部门</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'张三'</span>, <span class="number">20</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'李四'</span>, <span class="number">21</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'王五'</span>, <span class="number">20</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'老王'</span>, <span class="number">20</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'大王'</span>, <span class="number">22</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'小王'</span>, <span class="number">18</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure>

<h4 id="存在的问题："><a href="#存在的问题：" class="headerlink" title="存在的问题："></a>存在的问题：</h4><blockquote>
<p>当我们在<code>employee</code>的<code>dep_id</code>里面输入<code>不存在的部门</code>,数据依然可以添加. 但是并没有对应的部门，实际应用中不能出现这种情况。<code>employee</code>的<code>dep_id</code>中的数据只能是<code>department</code>表中存在的<code>id</code></p>
</blockquote>
<h4 id="目标"><a href="#目标" class="headerlink" title="目标:"></a>目标:</h4><blockquote>
<p>需要约束dep_id只能是department表中已经存在id</p>
</blockquote>
<h4 id="解决方式"><a href="#解决方式" class="headerlink" title="解决方式:"></a>解决方式:</h4><blockquote>
<p>使用外键约束</p>
</blockquote>
<h4 id="什么是外键约束"><a href="#什么是外键约束" class="headerlink" title="什么是外键约束"></a>什么是外键约束</h4><h5 id="什么是外键："><a href="#什么是外键：" class="headerlink" title="什么是外键："></a>什么是外键：</h5><blockquote>
<p>在从表中与主表主键对应的那一列，如：员工表中的dep_id</p>
</blockquote>
<h5 id="什么是主表："><a href="#什么是主表：" class="headerlink" title="什么是主表："></a>什么是主表：</h5><blockquote>
<p>一方，用来约束别人的表</p>
</blockquote>
<h5 id="什么是从表："><a href="#什么是从表：" class="headerlink" title="什么是从表："></a>什么是从表：</h5><blockquote>
<p>多方，被别人约束的表</p>
</blockquote>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124161308.png" alt=""></p>
<h4 id="创建约束的语法"><a href="#创建约束的语法" class="headerlink" title="创建约束的语法"></a>创建约束的语法</h4><h5 id="在创建表时，可以添加外键"><a href="#在创建表时，可以添加外键" class="headerlink" title="在创建表时，可以添加外键"></a>在创建表时，可以<code>添加</code>外键</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(</span><br><span class="line">  ....</span><br><span class="line">  外键列</span><br><span class="line">  <span class="keyword">constraint</span> 外键名称 <span class="keyword">foreign</span> <span class="keyword">key</span> (外键列名称) <span class="keyword">references</span> 主表名称(主表列名称)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>示例：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1) 删除副表/从表 employee</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> employee;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2) 创建从表 employee 并添加外键约束emp_depid_fk</span></span><br><span class="line"><span class="comment">-- 多方，从表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> employee(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="built_in">int</span>,</span><br><span class="line">dep_id <span class="built_in">int</span>, <span class="comment">-- 外键对应主表的主键</span></span><br><span class="line"><span class="comment">-- 创建外键约束</span></span><br><span class="line"><span class="keyword">constraint</span> emp_depid_fk <span class="keyword">foreign</span> <span class="keyword">key</span> (dep_id) <span class="keyword">references</span> department(<span class="keyword">id</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3) 正常添加数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'张三'</span>, <span class="number">20</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'李四'</span>, <span class="number">21</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'王五'</span>, <span class="number">20</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'老王'</span>, <span class="number">20</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'大王'</span>, <span class="number">22</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'小王'</span>, <span class="number">18</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4) 部门错误的数据添加失败</span></span><br><span class="line"><span class="comment">-- 插入不存在的部门</span></span><br><span class="line"><span class="comment">-- Cannot add or update a child row: a foreign key constraint fails</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'老张'</span>, <span class="number">18</span>, <span class="number">6</span>);</span><br></pre></td></tr></table></figure>



<h5 id="创建表之后，删除外键"><a href="#创建表之后，删除外键" class="headerlink" title="创建表之后，删除外键"></a>创建表之后，<code>删除</code>外键</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> 外键名称;</span><br></pre></td></tr></table></figure>

<h5 id="创建表之后，添加外键"><a href="#创建表之后，添加外键" class="headerlink" title="创建表之后，添加外键"></a>创建表之后，<code>添加</code>外键</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> 外键名称 <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (外键字段名称) <span class="keyword">REFERENCES</span> 主表名称(主表列名称);</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除employee表的emp_depid_fk外键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> employee <span class="keyword">drop</span> <span class="keyword">foreign</span> <span class="keyword">key</span> emp_depid_fk;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在employee表情存在的情况下添加外键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> employee <span class="keyword">add</span> <span class="keyword">constraint</span> emp_depid_fk</span><br><span class="line"><span class="keyword">foreign</span> <span class="keyword">key</span> (dep_id) <span class="keyword">references</span> department(<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure>



<h4 id="外键的级联操作"><a href="#外键的级联操作" class="headerlink" title="外键的级联操作"></a>外键的级联操作</h4><h5 id="新的问题："><a href="#新的问题：" class="headerlink" title="新的问题："></a>新的问题：</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> department;</span><br><span class="line"><span class="comment">-- 要把部门表中的id值2，改成5，能不能直接更新呢？</span></span><br><span class="line"><span class="comment">-- Cannot delete or update a parent row: a foreign key constraint fails</span></span><br><span class="line"><span class="keyword">update</span> department <span class="keyword">set</span> <span class="keyword">id</span>=<span class="number">5</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 要删除部门id等于1的部门, 能不能直接删除呢？</span></span><br><span class="line"><span class="comment">-- Cannot delete or update a parent row: a foreign key constraint fails</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> department <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span>;</span><br></pre></td></tr></table></figure>



<h5 id="什么是级联操作："><a href="#什么是级联操作：" class="headerlink" title="什么是级联操作："></a>什么是级联操作：</h5><blockquote>
<p>在修改和删除主表的主键时，同时更新或删除副表的外键值，称为级联操作</p>
</blockquote>
<h5 id="添加级联操作语法"><a href="#添加级联操作语法" class="headerlink" title="添加级联操作语法"></a>添加级联操作语法</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> 外键名称 </span><br><span class="line"><span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (外键字段名称) <span class="keyword">REFERENCES</span> 主表名称(主表列名称) <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CASCADE</span> <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">CASCADE</span>  ;</span><br></pre></td></tr></table></figure>

<h5 id="分类：-1"><a href="#分类：-1" class="headerlink" title="分类："></a>分类：</h5><ul>
<li><p>级联更新：<code>ON UPDATE CASCADE</code></p>
<p>级联更新，只能是<code>创建表</code>的时候创建级联关系。更新主表中的主键，从表中的外键列也自动同步更新</p>
</li>
<li><p>级联删除：<code>ON DELETE CASCADE</code></p>
</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除employee表，重新创建employee表，添加级联更新和级联删除</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> employee;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> employee(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">age <span class="built_in">int</span>,</span><br><span class="line">dep_id <span class="built_in">int</span>, <span class="comment">-- 外键对应主表的主键</span></span><br><span class="line"><span class="comment">-- 创建外键约束</span></span><br><span class="line"><span class="keyword">constraint</span> emp_depid_fk <span class="keyword">foreign</span> <span class="keyword">key</span> (dep_id) <span class="keyword">references</span></span><br><span class="line">department(<span class="keyword">id</span>) <span class="keyword">on</span> <span class="keyword">update</span> <span class="keyword">cascade</span> <span class="keyword">on</span> <span class="keyword">delete</span> <span class="keyword">cascade</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 再次添加数据到员工表和部门表</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'张三'</span>, <span class="number">20</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'李四'</span>, <span class="number">21</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'王五'</span>, <span class="number">20</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'老王'</span>, <span class="number">20</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'大王'</span>, <span class="number">22</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (<span class="keyword">NAME</span>, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'小王'</span>, <span class="number">18</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除部门表？能不能直接删除？</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> department;</span><br><span class="line"><span class="comment">-- 把部门表中id等于1的部门改成id等于10</span></span><br><span class="line"><span class="keyword">update</span> department <span class="keyword">set</span> <span class="keyword">id</span>=<span class="number">10</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employee;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> department;</span><br><span class="line"><span class="comment">-- 删除部门号是2的部门</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> department <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">2</span>;</span><br></pre></td></tr></table></figure>







<hr>
<h1 id="数据库的设计"><a href="#数据库的设计" class="headerlink" title="数据库的设计"></a>数据库的设计</h1><h2 id="多表之间的关系"><a href="#多表之间的关系" class="headerlink" title="多表之间的关系"></a>多表之间的关系</h2><h3 id="分类：-2"><a href="#分类：-2" class="headerlink" title="分类："></a>分类：</h3><ol>
<li><p><code>一对一</code>(了解)：如：人和身份证<br> <strong>分析</strong>：一个人只有一个身份证，一个身份证只能对应一个人</p>
</li>
<li><p><code>一对多</code>(多对一)：如：部门和员工</p>
<p>  <strong>分析</strong>：一个部门有多个员工，一个员工只能对应一个部门</p>
</li>
<li><p><code>多对多</code>：如：学生和课程</p>
<p><strong>分析</strong>：一个学生可以选择很多门课程，一个课程也可以被很多学生选择</p>
</li>
</ol>
<h3 id="实现关系："><a href="#实现关系：" class="headerlink" title="实现关系："></a>实现关系：</h3><ol>
<li><p><code>一对多(多对一)</code>：如：部门和员工</p>
<p><strong>实现方式</strong>：<code>在多的一方建立外键，指向一的一方的主键</code>。</p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124093600.bmp" alt=""></p>
</li>
<li><p><code>多对多</code>：如：学生和课程</p>
<p><strong>实现方式</strong>：<code>多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键</code></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124093703.bmp" alt=""></p>
</li>
<li><p><code>一对一</code>(了解)：如：人和身份证</p>
<p><strong>实现方式</strong>：<code>一对一关系实现，可以在任意一方添加唯一外键指向另一方的主键。</code></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124094432.bmp" alt=""></p>
</li>
</ol>
<h3 id="一对多关系案例"><a href="#一对多关系案例" class="headerlink" title="一对多关系案例"></a>一对多关系案例</h3><h4 id="需求："><a href="#需求：" class="headerlink" title="需求："></a>需求：</h4><blockquote>
<p>一个旅游线路分类中有多个旅游线路</p>
</blockquote>
<h4 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h4><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124164654.png" style="zoom:80%;" />

<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124164847.png" style="zoom:80%;" />

<p>  <img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124165203.png" alt=""></p>
<h4 id="具体实现："><a href="#具体实现：" class="headerlink" title="具体实现："></a>具体实现：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建旅游线路分类表 tab_category</span></span><br><span class="line"><span class="comment">-- cid 旅游线路分类主键，自动增长</span></span><br><span class="line"><span class="comment">-- cname 旅游线路分类名称非空，唯一，字符串 100</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tab_category (</span><br><span class="line">  cid <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">  cname <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span></span><br><span class="line">);</span><br><span class="line">		</span><br><span class="line"><span class="comment">-- 创建旅游线路表 tab_route</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    rid 旅游线路主键，自动增长</span></span><br><span class="line"><span class="comment">    rname 旅游线路名称非空，唯一，字符串 100</span></span><br><span class="line"><span class="comment">    price 价格</span></span><br><span class="line"><span class="comment">    rdate 上架时间，日期类型</span></span><br><span class="line"><span class="comment">    cid 外键，所属分类</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tab_route(</span><br><span class="line">  rid <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">  rname <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">  price <span class="keyword">DOUBLE</span>,</span><br><span class="line">  rdate <span class="built_in">DATE</span>,</span><br><span class="line">  cid <span class="built_in">INT</span>,</span><br><span class="line">  <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (cid) <span class="keyword">REFERENCES</span> tab_category(cid)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="多对多关系案例"><a href="#多对多关系案例" class="headerlink" title="多对多关系案例"></a>多对多关系案例</h3><h4 id="需求：-1"><a href="#需求：-1" class="headerlink" title="需求："></a>需求：</h4><blockquote>
<p>一个用户收藏多个线路，一个线路被多个用户收藏</p>
</blockquote>
<h4 id="分析：-1"><a href="#分析：-1" class="headerlink" title="分析："></a>分析：</h4><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124165756.png" style="zoom:80%;" />

<p>  <img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124165907.png" alt=""></p>
<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124165938.png" style="zoom:80%;" />

<h4 id="具体实现：-1"><a href="#具体实现：-1" class="headerlink" title="具体实现："></a>具体实现：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*创建用户表 tab_user</span></span><br><span class="line"><span class="comment">    uid 用户主键，自增长</span></span><br><span class="line"><span class="comment">    username 用户名长度 100，唯一，非空</span></span><br><span class="line"><span class="comment">    password 密码长度 30，非空</span></span><br><span class="line"><span class="comment">    name 真实姓名长度 100</span></span><br><span class="line"><span class="comment">    birthday 生日</span></span><br><span class="line"><span class="comment">    sex 性别，定长字符串 1</span></span><br><span class="line"><span class="comment">    telephone 手机号，字符串 11</span></span><br><span class="line"><span class="comment">    email 邮箱，字符串长度 100</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tab_user (</span><br><span class="line">  uid <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">  username <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="keyword">PASSWORD</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="keyword">NAME</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">  birthday <span class="built_in">DATE</span>,</span><br><span class="line">  sex <span class="built_in">CHAR</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">'男'</span>,</span><br><span class="line">  telephone <span class="built_in">VARCHAR</span>(<span class="number">11</span>),</span><br><span class="line">  email <span class="built_in">VARCHAR</span>(<span class="number">100</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    创建收藏表 tab_favorite</span></span><br><span class="line"><span class="comment">    rid 旅游线路 id，外键</span></span><br><span class="line"><span class="comment">    date 收藏时间</span></span><br><span class="line"><span class="comment">    uid 用户 id，外键</span></span><br><span class="line"><span class="comment">    rid 和 uid 不能重复，设置复合主键，同一个用户不能收藏同一个线路两次</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tab_favorite (</span><br><span class="line">  rid <span class="built_in">INT</span>, <span class="comment">-- 线路id</span></span><br><span class="line">  <span class="built_in">DATE</span> DATETIME,</span><br><span class="line">  uid <span class="built_in">INT</span>, <span class="comment">-- 用户id</span></span><br><span class="line"><span class="comment">-- 创建复合主键</span></span><br><span class="line">  PRIMARY <span class="keyword">KEY</span>(rid,uid), <span class="comment">-- 联合主键</span></span><br><span class="line">  <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (rid) <span class="keyword">REFERENCES</span> tab_route(rid),</span><br><span class="line">  <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(uid) <span class="keyword">REFERENCES</span> tab_user(uid)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h2 id="数据库设计的范式"><a href="#数据库设计的范式" class="headerlink" title="数据库设计的范式"></a>数据库设计的范式</h2><h3 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h3><blockquote>
<p>设计数据库时，需要遵循的一些规范。要遵循后边的范式要求，必须先遵循前边的所有范式要求</p>
<p>设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。<br>目前关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF，又称完美范式）。</p>
</blockquote>
<h3 id="分类：-3"><a href="#分类：-3" class="headerlink" title="分类："></a>分类：</h3><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124171616.png" style="zoom:80%;" />

<h4 id="1-第一范式（1NF）："><a href="#1-第一范式（1NF）：" class="headerlink" title="1.第一范式（1NF）："></a>1.第一范式（<code>1NF</code>）：</h4><blockquote>
<p>每一列都是不可分割的原子数据项, 不能是集合、数组等非原子数据项。即表中的某个列有多个值时，必须拆分为不同的列。<code>简而言之，第一范式每一列不可再拆分，称为原子性</code>。</p>
</blockquote>
<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124171737.png" style="zoom:80%;" />

<h4 id="2-第二范式（2NF）："><a href="#2-第二范式（2NF）：" class="headerlink" title="2.第二范式（2NF）："></a>2.第二范式（<code>2NF</code>）：</h4><blockquote>
<p>在<code>1NF</code>的基础上，非码属性必须完全依赖于码（在1NF基础上<code>消除非主属性对主码的部分函数依赖</code>）</p>
</blockquote>
<h5 id="几个概念："><a href="#几个概念：" class="headerlink" title="几个概念："></a>几个概念：</h5><ol>
<li><code>函数依赖</code>：A–&gt;B, 如果通过A属性(属性组)的值，可以确定唯一B属性的值。则称B依赖于A<br> 例如：学号–&gt;姓名。  （学号，课程名称） –&gt; 分数</li>
<li><code>完全函数依赖</code>：A–&gt;B，如果A是一个属性组，则B属性值得确定需要依赖于A属性组中所有的属性值。<br> 例如：（学号，课程名称） –&gt; 分数</li>
<li><code>部分函数依赖</code>：A–&gt;B，如果A是一个属性组，则B属性值得确定只需要依赖于A属性组中某一些值即可。<br> 例如：（学号，课程名称） – &gt; 姓名</li>
<li><code>传递函数依赖</code>：A–&gt;B, B – &gt;C . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性（属性组）的值可以确定唯一C属性的值，则称 C 传递函数依赖于A<br> 例如：学号–&gt;系名，系名–&gt;系主任</li>
<li><code>码</code>：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码<br> 例如：该表中码为：（学号，课程名称）<ul>
<li><code>主属性</code>：码属性组中的所有属性</li>
<li><code>非主属性</code>：除过码属性组的属性</li>
</ul>
</li>
</ol>
<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124171908.png" style="zoom:80%;" />

<h4 id="3-第三范式（3NF）："><a href="#3-第三范式（3NF）：" class="headerlink" title="3.第三范式（3NF）："></a>3.<code>第三范式（3NF）</code>：</h4><blockquote>
<p>在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）</p>
</blockquote>
<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124172236.png" style="zoom:80%;" />

<hr>
<h1 id="多表查询："><a href="#多表查询：" class="headerlink" title="多表查询："></a>多表查询：</h1><h2 id="查询语法："><a href="#查询语法：" class="headerlink" title="查询语法："></a>查询语法：</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  列名列表</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  表名列表</span><br><span class="line">where....</span><br></pre></td></tr></table></figure>

<h2 id="准备sql"><a href="#准备sql" class="headerlink" title="准备sql"></a>准备sql</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建部门表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept(</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="keyword">NAME</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept (<span class="keyword">NAME</span>) <span class="keyword">VALUES</span> (<span class="string">'开发部'</span>),(<span class="string">'市场部'</span>),(<span class="string">'财务部'</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建员工表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp (</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">	<span class="keyword">NAME</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">	gender <span class="built_in">CHAR</span>(<span class="number">1</span>), <span class="comment">-- 性别</span></span><br><span class="line">	salary <span class="keyword">DOUBLE</span>, <span class="comment">-- 工资</span></span><br><span class="line">	join_date <span class="built_in">DATE</span>, <span class="comment">-- 入职日期</span></span><br><span class="line">	dept_id <span class="built_in">INT</span>,</span><br><span class="line">	<span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (dept_id) <span class="keyword">REFERENCES</span> dept(<span class="keyword">id</span>) <span class="comment">-- 外键，关联部门表(部门表的主键)</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(<span class="keyword">NAME</span>,gender,salary,join_date,dept_id) <span class="keyword">VALUES</span>(<span class="string">'孙悟空'</span>,<span class="string">'男'</span>,<span class="number">7200</span>,<span class="string">'2013-02-24'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(<span class="keyword">NAME</span>,gender,salary,join_date,dept_id) <span class="keyword">VALUES</span>(<span class="string">'猪八戒'</span>,<span class="string">'男'</span>,<span class="number">3600</span>,<span class="string">'2010-12-02'</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(<span class="keyword">NAME</span>,gender,salary,join_date,dept_id) <span class="keyword">VALUES</span>(<span class="string">'唐僧'</span>,<span class="string">'男'</span>,<span class="number">9000</span>,<span class="string">'2008-08-08'</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(<span class="keyword">NAME</span>,gender,salary,join_date,dept_id) <span class="keyword">VALUES</span>(<span class="string">'白骨精'</span>,<span class="string">'女'</span>,<span class="number">5000</span>,<span class="string">'2015-10-07'</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(<span class="keyword">NAME</span>,gender,salary,join_date,dept_id) <span class="keyword">VALUES</span>(<span class="string">'蜘蛛精'</span>,<span class="string">'女'</span>,<span class="number">4500</span>,<span class="string">'2011-03-14'</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124204934.png" style="zoom:80%;" />

<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124205018.png" style="zoom:80%;" />

<h2 id="笛卡尔积："><a href="#笛卡尔积：" class="headerlink" title="笛卡尔积："></a>笛卡尔积：</h2><blockquote>
<p>有两个集合A,B .取这两个集合的所有组成情况。</p>
<p>要完成多表查询，需要消除无用的数据</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 需求：查询所有的员工和所有的部门</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp,dept;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124174104.png" alt=""></p>
<h3 id="如何清除笛卡尔积现象的影响"><a href="#如何清除笛卡尔积现象的影响" class="headerlink" title="如何清除笛卡尔积现象的影响"></a>如何清除笛卡尔积现象的影响</h3><blockquote>
<p>我们发现不是所有的数据组合都是有用的，只有员工表.dept_id = 部门表.id 的数据才是有用的。所以需要通过条件过滤掉没用的数据</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 设置过滤条件 Column 'id' in where clause is ambiguous</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp,dept <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">5</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp,dept <span class="keyword">where</span> emp.<span class="string">`dept_id`</span> = dept.<span class="string">`id`</span>;</span><br><span class="line"><span class="comment">-- 查询员工和部门的名字</span></span><br><span class="line"><span class="keyword">select</span> emp.<span class="string">`name`</span>, dept.<span class="string">`name`</span> <span class="keyword">from</span> emp,dept <span class="keyword">where</span> emp.<span class="string">`dept_id`</span> = dept.<span class="string">`id`</span>;</span><br></pre></td></tr></table></figure>

<h2 id="多表查询的分类："><a href="#多表查询的分类：" class="headerlink" title="多表查询的分类："></a>多表查询的分类：</h2><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124173942.png" style="zoom:80%;" />

<h3 id="1-内连接查询："><a href="#1-内连接查询：" class="headerlink" title="1. 内连接查询："></a>1. 内连接查询：</h3><h4 id="1-1-隐式内连接："><a href="#1-1-隐式内连接：" class="headerlink" title="1.1 隐式内连接："></a>1.1 隐式内连接：</h4><blockquote>
<p>看不到<code>JOIN</code>关键字，条件使用WHERE指定, 使用where条件消除无用数据</p>
</blockquote>
<p><strong>例子：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询所有员工信息和对应的部门信息</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp,dept <span class="keyword">WHERE</span> emp.<span class="string">`dept_id`</span> = dept.<span class="string">`id`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询员工表的名称，性别。部门表的名称</span></span><br><span class="line"><span class="keyword">SELECT</span> emp.name,emp.gender,dept.name <span class="keyword">FROM</span> emp,dept <span class="keyword">WHERE</span> emp.<span class="string">`dept_id`</span> = dept.<span class="string">`id`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  t1.name, <span class="comment">-- 员工表的姓名</span></span><br><span class="line">  t1.gender,<span class="comment">-- 员工表的性别</span></span><br><span class="line">  t2.name <span class="comment">-- 部门表的名称</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  emp t1,</span><br><span class="line">  dept t2</span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">  t1.<span class="string">`dept_id`</span> = t2.<span class="string">`id`</span>;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-显式内连接："><a href="#1-2-显式内连接：" class="headerlink" title="1.2 显式内连接："></a>1.2 显式内连接：</h4><blockquote>
<p>使用INNER JOIN … ON语句, 可以省略INNER</p>
</blockquote>
<p><strong>语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段列表 <span class="keyword">from</span> 表名<span class="number">1</span> [<span class="keyword">inner</span>] <span class="keyword">join</span> 表名<span class="number">2</span> <span class="keyword">on</span> 条件s</span><br></pre></td></tr></table></figure>

<p><strong>需求：</strong>查询唐僧的信息，显示员工id，姓名，性别，工资和所在的部门名称，我们发现需要联合2张表同时才能查询出需要的数据，使用内连接</p>
<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124174556.png" style="zoom:80%;" />

<ol>
<li><p>确定查询哪些表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">inner</span> <span class="keyword">join</span> dept;</span><br></pre></td></tr></table></figure>

<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124174731.png" style="zoom: 67%;" />
</li>
<li><p>确定表连接条件，员工表.dept_id = 部门表.id 的数据才是有效的</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">INNER</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> emp.<span class="string">`dept_id`</span> = dept.<span class="string">`id`</span>;	</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> emp.<span class="string">`dept_id`</span> = dept.<span class="string">`id`</span>;</span><br></pre></td></tr></table></figure>

<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124174918.png" style="zoom:67%;" />
</li>
<li><p>确定查询条件，我们查询的是唐僧的信息，员工表.name=’唐僧’</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp e <span class="keyword">inner</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.<span class="string">`dept_id`</span> = d.<span class="string">`id`</span> <span class="keyword">where</span> e.<span class="string">`name`</span>=<span class="string">'唐僧'</span>;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124175235.png" alt=""></p>
</li>
<li><p>确定查询字段，查询唐僧的信息，显示员工id，姓名，性别，工资和所在的部门名称</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.<span class="string">`id`</span>,e.<span class="string">`name`</span>,e.<span class="string">`gender`</span>,e.<span class="string">`salary`</span>,d.<span class="string">`name`</span> <span class="keyword">from</span> emp e <span class="keyword">inner</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.<span class="string">`dept_id`</span> = d.<span class="string">`id`</span> <span class="keyword">where</span> e.<span class="string">`name`</span>=<span class="string">'唐僧'</span>;</span><br></pre></td></tr></table></figure>

<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124175330.png" style="zoom: 80%;" />
</li>
<li><p>我们发现写表名有点长，可以给表取别名，显示的字段名也使用别名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.<span class="string">`id`</span> 编号,e.<span class="string">`name`</span> 姓名,e.<span class="string">`gender`</span> 性别,e.<span class="string">`salary`</span> 工资,d.<span class="string">`name`</span> 部门名字 <span class="keyword">from</span> emp e <span class="keyword">inner</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.<span class="string">`dept_id`</span> = d.<span class="string">`id`</span> <span class="keyword">where</span> e.<span class="string">`name`</span>=<span class="string">'唐僧'</span>;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="1-3-内连接查询步骤："><a href="#1-3-内连接查询步骤：" class="headerlink" title="1.3. 内连接查询步骤："></a>1.3. 内连接查询步骤：</h4><ol>
<li>确定查询哪些表</li>
<li>确定表连接的条件</li>
<li>确定查询的条件</li>
<li>确定查询的字段</li>
</ol>
<h3 id="2-外链接查询："><a href="#2-外链接查询：" class="headerlink" title="2. 外链接查询："></a>2. 外链接查询：</h3><h4 id="2-1-左外连接："><a href="#2-1-左外连接：" class="headerlink" title="2.1 左外连接："></a>2.1 左外连接：</h4><blockquote>
<p>使用LEFT OUTER JOIN … ON，OUTER可以省略， 查询的是左表所有数据以及其交集部分。</p>
<p>用左边表的记录去匹配右边表的记录，如果符合条件的则显示；否则，显示NULL</p>
<p>可以理解为：在内连接的基础上保证左表的数据全部显示(左表是部门，右表员工)</p>
</blockquote>
<p><strong>语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段列表 <span class="keyword">from</span> 表<span class="number">1</span> <span class="keyword">left</span> [<span class="keyword">outer</span>] <span class="keyword">join</span> 表<span class="number">2</span> <span class="keyword">on</span> 条件；</span><br></pre></td></tr></table></figure>

<p><strong>例子：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在部门表中增加一个销售部</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept (<span class="keyword">name</span>) <span class="keyword">values</span> (<span class="string">'销售部'</span>);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept;</span><br><span class="line"><span class="comment">-- 使用内连接查询</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept d <span class="keyword">inner</span> <span class="keyword">join</span> emp e <span class="keyword">on</span> d.<span class="string">`id`</span> = e.<span class="string">`dept_id`</span>;</span><br><span class="line"><span class="comment">-- 使用左外连接查询</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept d <span class="keyword">left</span> <span class="keyword">join</span> emp e <span class="keyword">on</span> d.<span class="string">`id`</span> = e.<span class="string">`dept_id`</span>;</span><br></pre></td></tr></table></figure>

<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124180108.png" style="zoom:80%;" />

<h4 id="2-2-右外连接："><a href="#2-2-右外连接：" class="headerlink" title="2.2 右外连接："></a>2.2 右外连接：</h4><blockquote>
<p>使用RIGHT OUTER JOIN … ON，OUTER可以省略，查询的是右表所有数据以及其交集部分。</p>
<p>用右边表的记录去匹配左边表的记录，如果符合条件的则显示；否则，显示NULL<br>可以理解为：在内连接的基础上保证右表的数据全部显示</p>
</blockquote>
<p> <strong>语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段列表 <span class="keyword">from</span> 表<span class="number">1</span> <span class="keyword">right</span> [<span class="keyword">outer</span>] <span class="keyword">join</span> 表<span class="number">2</span> <span class="keyword">on</span> 条件；</span><br></pre></td></tr></table></figure>

<p><strong>例子：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在员工表中增加一个员工</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span> (<span class="literal">null</span>, <span class="string">'沙僧'</span>,<span class="string">'男'</span>,<span class="number">6666</span>,<span class="string">'2013-12-05'</span>,<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124180217.png" style="zoom: 67%;" />

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用内连接查询</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept <span class="keyword">inner</span> <span class="keyword">join</span> emp <span class="keyword">on</span> dept.<span class="string">`id`</span> = emp.<span class="string">`dept_id`</span>;</span><br><span class="line"><span class="comment">-- 使用右外连接查询</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> dept <span class="keyword">right</span> <span class="keyword">join</span> emp <span class="keyword">on</span> dept.<span class="string">`id`</span> = emp.<span class="string">`dept_id`</span>;</span><br></pre></td></tr></table></figure>

<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124180356.png" style="zoom: 67%;" />

<h3 id="3-子查询："><a href="#3-子查询：" class="headerlink" title="3. 子查询："></a>3. 子查询：</h3><h4 id="什么是子查询"><a href="#什么是子查询" class="headerlink" title="什么是子查询"></a>什么是子查询</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--需求：查询开发部中有哪些员工</span></span><br><span class="line"><span class="comment">--1.查询dept表</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> <span class="keyword">name</span>=<span class="string">'开发部'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--2.查询emp表</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FORM</span> emp <span class="keyword">WHERE</span> dept_id=<span class="string">'1'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--使用子查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NAME</span> <span class="keyword">FORM</span> emp <span class="keyword">WHERE</span> dept_id=(<span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> <span class="keyword">name</span>=<span class="string">'开发部'</span>);</span><br></pre></td></tr></table></figure>

<h4 id="概念：-1"><a href="#概念：-1" class="headerlink" title="概念："></a>概念：</h4><blockquote>
<ol>
<li>一个查询的结果做为另一个查询的条件</li>
<li>有查询的嵌套，内部的查询称为子查询</li>
<li>子查询要使用括号</li>
</ol>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询工资最高的员工信息</span></span><br><span class="line"><span class="comment">-- 1 查询最高的工资是多少 9000</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(salary) <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">-- 2 查询员工信息，并且工资等于9000的</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.<span class="string">`salary`</span> = <span class="number">9000</span>;		</span><br><span class="line"><span class="comment">-- 一条sql就完成这个操作。子查询</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.<span class="string">`salary`</span> = (<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(salary) <span class="keyword">FROM</span> emp);</span><br></pre></td></tr></table></figure>

<h4 id="子查询三种情况"><a href="#子查询三种情况" class="headerlink" title="子查询三种情况"></a>子查询三种情况</h4><ol>
<li><p>子查询的结果是单行单列的：</p>
<blockquote>
<p>子查询可以作为条件，使用运算符去判断。 运算符： &gt; &gt;= &lt; &lt;= =</p>
</blockquote>
<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124184141.png" style="zoom:67%;" />

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询员工工资小于平均工资的人</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.salary &lt; (<span class="keyword">SELECT</span> <span class="keyword">AVG</span>(salary) <span class="keyword">FROM</span> emp);</span><br><span class="line"><span class="comment">-- 2.查询工资最高的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> salary= (<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(salary) <span class="keyword">FROM</span> emp);</span><br></pre></td></tr></table></figure>
</li>
<li><p>子查询的结果是多行单列的：</p>
<blockquote>
<p>子查询可以作为条件，使用运算符<code>in</code>来判断</p>
</blockquote>
<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124184058.png" style="zoom:80%;" />

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询'财务部'和'市场部'所有的员工信息</span></span><br><span class="line"><span class="comment">-- 1.1 先查询开发部与财务部的id</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> <span class="keyword">NAME</span> <span class="keyword">in</span> (<span class="string">'财务部'</span>，<span class="string">'市场部'</span>);</span><br><span class="line"><span class="comment">-- 1.2 再查询在这些部门id中有哪些员工</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> dept_id = <span class="number">3</span> <span class="keyword">OR</span> dept_id = <span class="number">2</span>;</span><br><span class="line"><span class="comment">-- 子查询</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> dept_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="keyword">id</span> <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> <span class="keyword">NAME</span> <span class="keyword">in</span> (<span class="string">'财务部'</span>，<span class="string">'市场部'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.查询工资大于5000的员工，来自于哪些部门的名字</span></span><br><span class="line"><span class="comment">-- 2.1 先查询大于5000的员工所在的部门id</span></span><br><span class="line"><span class="keyword">SELECT</span> dept_id <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> salary&gt;<span class="number">5000</span>;</span><br><span class="line"><span class="comment">-- 2.2 再查询在这些部门id中部门的名字</span></span><br><span class="line"><span class="keyword">SELECT</span> dept.NAME <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> dept.id <span class="keyword">in</span> (<span class="keyword">SELECT</span> e.dept_id <span class="keyword">FROM</span> emp e <span class="keyword">WHERE</span> e.salary&gt;<span class="number">5000</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>子查询的结果是多行多列的：</p>
<blockquote>
<p>子查询结果只要是多列，肯定在FROM后面作为表，子查询可以作为一张虚拟表参与查询</p>
<p><code>子查询作为表需要取别名，否则这张表没有名称则无法访问表中的字段</code></p>
</blockquote>
<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124184246.png" style="zoom:80%;" />



</li>
</ol>
<pre><code><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询员工入职日期是2011-11-11日之后的员工信息和部门信息</span></span><br><span class="line"><span class="comment">-- 1.1 在员工表中查询2011-1-1以后入职的员工</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.<span class="string">`join_date`</span> &gt; <span class="string">'2011-11-11'</span></span><br><span class="line"><span class="comment">-- 1.2 查询所有的部门信息，与上面的虚拟表中的信息组合，找出所有部门id等于的dept_id</span></span><br><span class="line"><span class="comment">-- 子查询</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> dept t1 ,(<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.<span class="string">`join_date`</span> &gt; <span class="string">'2011-11-11'</span>) t2</span><br><span class="line"><span class="keyword">WHERE</span> t1.id = t2.dept_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 普通内连接</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp t1,dept t2 <span class="keyword">WHERE</span> t1.<span class="string">`dept_id`</span> = t2.<span class="string">`id`</span> <span class="keyword">AND</span> t1.<span class="string">`join_date`</span> &gt;  <span class="string">'2011-11-11'</span>  </span><br><span class="line">或者</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">INNER</span> <span class="keyword">JOIN</span> dept <span class="keyword">on</span> emp.dept_id = dept.id <span class="keyword">WHERE</span> emp.join_date&gt;<span class="string">'2011-11-11'</span>;</span><br></pre></td></tr></table></figure></code></pre><h4 id="子查询小结"><a href="#子查询小结" class="headerlink" title="子查询小结"></a>子查询小结</h4><ol>
<li>子查询结果只要是单列，则在WHERE后面作为条件</li>
<li>子查询结果只要是多列，则在FROM后面作为表进行二次查询</li>
</ol>
<h4 id="多表查询练习"><a href="#多表查询练习" class="headerlink" title="多表查询练习"></a>多表查询练习</h4><h5 id="数据准备"><a href="#数据准备" class="headerlink" title="数据准备"></a>数据准备</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 部门表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> PRIMARY <span class="keyword">KEY</span>, <span class="comment">-- 部门id</span></span><br><span class="line">  dname <span class="built_in">VARCHAR</span>(<span class="number">50</span>), <span class="comment">-- 部门名称</span></span><br><span class="line">  loc <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="comment">-- 部门所在地</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 添加4个部门</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept(<span class="keyword">id</span>,dname,loc) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">10</span>,<span class="string">'教研部'</span>,<span class="string">'北京'</span>),</span><br><span class="line">(<span class="number">20</span>,<span class="string">'学工部'</span>,<span class="string">'上海'</span>),</span><br><span class="line">(<span class="number">30</span>,<span class="string">'销售部'</span>,<span class="string">'广州'</span>),</span><br><span class="line">(<span class="number">40</span>,<span class="string">'财务部'</span>,<span class="string">'深圳'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 职务表，职务名称，职务描述</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> job (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">  jname <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">  description <span class="built_in">VARCHAR</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 添加4个职务</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> job (<span class="keyword">id</span>, jname, description) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">'董事长'</span>, <span class="string">'管理整个公司，接单'</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">'经理'</span>, <span class="string">'管理部门员工'</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">'销售员'</span>, <span class="string">'向客人推销产品'</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="string">'文员'</span>, <span class="string">'使用办公软件'</span>);</span><br><span class="line"><span class="comment">-- 员工表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>, <span class="comment">-- 员工id</span></span><br><span class="line">  ename <span class="built_in">VARCHAR</span>(<span class="number">50</span>), <span class="comment">-- 员工姓名</span></span><br><span class="line">  job_id <span class="built_in">INT</span>, <span class="comment">-- 职务id</span></span><br><span class="line">  mgr <span class="built_in">INT</span> , <span class="comment">-- 上级领导</span></span><br><span class="line">  joindate <span class="built_in">DATE</span>, <span class="comment">-- 入职日期</span></span><br><span class="line">  salary <span class="built_in">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>), <span class="comment">-- 工资</span></span><br><span class="line">  bonus <span class="built_in">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>), <span class="comment">-- 奖金</span></span><br><span class="line">  dept_id <span class="built_in">INT</span>, <span class="comment">-- 所在部门编号</span></span><br><span class="line">  <span class="keyword">CONSTRAINT</span> emp_jobid_ref_job_id_fk <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (job_id) <span class="keyword">REFERENCES</span> job (<span class="keyword">id</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> emp_deptid_ref_dept_id_fk <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (dept_id) <span class="keyword">REFERENCES</span> dept (<span class="keyword">id</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 添加员工</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> emp(<span class="keyword">id</span>,ename,job_id,mgr,joindate,salary,bonus,dept_id) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1001</span>,<span class="string">'孙悟空'</span>,<span class="number">4</span>,<span class="number">1004</span>,<span class="string">'2000-12-17'</span>,<span class="string">'8000.00'</span>,<span class="literal">NULL</span>,<span class="number">20</span>),</span><br><span class="line">(<span class="number">1002</span>,<span class="string">'卢俊义'</span>,<span class="number">3</span>,<span class="number">1006</span>,<span class="string">'2001-02-20'</span>,<span class="string">'16000.00'</span>,<span class="string">'3000.00'</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1003</span>,<span class="string">'林冲'</span>,<span class="number">3</span>,<span class="number">1006</span>,<span class="string">'2001-02-22'</span>,<span class="string">'12500.00'</span>,<span class="string">'5000.00'</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1004</span>,<span class="string">'唐僧'</span>,<span class="number">2</span>,<span class="number">1009</span>,<span class="string">'2001-04-02'</span>,<span class="string">'29750.00'</span>,<span class="literal">NULL</span>,<span class="number">20</span>),</span><br><span class="line">(<span class="number">1005</span>,<span class="string">'李逵'</span>,<span class="number">4</span>,<span class="number">1006</span>,<span class="string">'2001-09-28'</span>,<span class="string">'12500.00'</span>,<span class="string">'14000.00'</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1006</span>,<span class="string">'宋江'</span>,<span class="number">2</span>,<span class="number">1009</span>,<span class="string">'2001-05-01'</span>,<span class="string">'28500.00'</span>,<span class="literal">NULL</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1007</span>,<span class="string">'刘备'</span>,<span class="number">2</span>,<span class="number">1009</span>,<span class="string">'2001-09-01'</span>,<span class="string">'24500.00'</span>,<span class="literal">NULL</span>,<span class="number">10</span>),</span><br><span class="line">(<span class="number">1008</span>,<span class="string">'猪八戒'</span>,<span class="number">4</span>,<span class="number">1004</span>,<span class="string">'2007-04-19'</span>,<span class="string">'30000.00'</span>,<span class="literal">NULL</span>,<span class="number">20</span>),</span><br><span class="line">(<span class="number">1009</span>,<span class="string">'罗贯中'</span>,<span class="number">1</span>,<span class="literal">NULL</span>,<span class="string">'2001-11-17'</span>,<span class="string">'50000.00'</span>,<span class="literal">NULL</span>,<span class="number">10</span>),</span><br><span class="line">(<span class="number">1010</span>,<span class="string">'吴用'</span>,<span class="number">3</span>,<span class="number">1006</span>,<span class="string">'2001-09-08'</span>,<span class="string">'15000.00'</span>,<span class="string">'0.00'</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1011</span>,<span class="string">'沙僧'</span>,<span class="number">4</span>,<span class="number">1004</span>,<span class="string">'2007-05-23'</span>,<span class="string">'11000.00'</span>,<span class="literal">NULL</span>,<span class="number">20</span>),</span><br><span class="line">(<span class="number">1012</span>,<span class="string">'李逵'</span>,<span class="number">4</span>,<span class="number">1006</span>,<span class="string">'2001-12-03'</span>,<span class="string">'9500.00'</span>,<span class="literal">NULL</span>,<span class="number">30</span>),</span><br><span class="line">(<span class="number">1013</span>,<span class="string">'小白龙'</span>,<span class="number">4</span>,<span class="number">1004</span>,<span class="string">'2001-12-03'</span>,<span class="string">'30000.00'</span>,<span class="literal">NULL</span>,<span class="number">20</span>),</span><br><span class="line">(<span class="number">1014</span>,<span class="string">'关羽'</span>,<span class="number">4</span>,<span class="number">1007</span>,<span class="string">'2002-01-23'</span>,<span class="string">'13000.00'</span>,<span class="literal">NULL</span>,<span class="number">10</span>);</span><br><span class="line"><span class="comment">-- 工资等级表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> salarygrade (</span><br><span class="line">  grade <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>,   <span class="comment">-- 级别</span></span><br><span class="line">  losalary <span class="built_in">INT</span>,  <span class="comment">-- 最低工资</span></span><br><span class="line">  hisalary <span class="built_in">INT</span> <span class="comment">-- 最高工资</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 添加5个工资等级</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> salarygrade(grade,losalary,hisalary) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1</span>,<span class="number">7000</span>,<span class="number">12000</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="number">12010</span>,<span class="number">14000</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="number">14010</span>,<span class="number">20000</span>),</span><br><span class="line">(<span class="number">4</span>,<span class="number">20010</span>,<span class="number">30000</span>),</span><br><span class="line">(<span class="number">5</span>,<span class="number">30010</span>,<span class="number">99990</span>);</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124212903.png" alt="dept表"></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124212941.png" alt="emp表"></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124213022.png" alt="job表"></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124213058.png" alt="salarygrade表"></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201124215329.png" alt="ER图"></p>
<p><strong>1. 查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 需求：</span></span><br><span class="line"><span class="comment">-- 1.查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述</span></span><br><span class="line">  	<span class="comment">/*</span></span><br><span class="line"><span class="comment">  	分析：</span></span><br><span class="line"><span class="comment">  	1.员工编号，员工姓名，工资，需要查询emp表  </span></span><br><span class="line"><span class="comment">  	  职务名称，职务描述 需要查询job表</span></span><br><span class="line"><span class="comment">  	2.查询条件 emp.job_id = job.id</span></span><br><span class="line"><span class="comment">  	*/</span></span><br><span class="line">  <span class="keyword">SELECT</span> </span><br><span class="line">	t1.<span class="string">`id`</span>, <span class="comment">-- 员工编号</span></span><br><span class="line">  	t1.<span class="string">`ename`</span>, <span class="comment">-- 员工姓名</span></span><br><span class="line">  	t1.<span class="string">`salary`</span>,<span class="comment">-- 工资</span></span><br><span class="line">  	t2.<span class="string">`jname`</span>, <span class="comment">-- 职务名称</span></span><br><span class="line">  	t2.<span class="string">`description`</span> <span class="comment">-- 职务描述</span></span><br><span class="line">  <span class="keyword">FROM</span> </span><br><span class="line">    emp t1, job t2</span><br><span class="line">  <span class="keyword">WHERE</span> </span><br><span class="line">    t1.<span class="string">`job_id`</span> = t2.<span class="string">`id`</span>;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">-- 或者</span></span><br><span class="line">  <span class="keyword">SELECT</span> </span><br><span class="line">	emp.ename <span class="string">'姓名'</span>, </span><br><span class="line">	emp.salary <span class="string">'工资'</span>, </span><br><span class="line">	job.jname <span class="string">'职务名称'</span>, </span><br><span class="line">	job.description <span class="string">'职务描述'</span> </span><br><span class="line"><span class="keyword">FROM</span> emp <span class="keyword">inner</span> <span class="keyword">join</span> job <span class="keyword">on</span> job.id=emp.job_id;</span><br></pre></td></tr></table></figure>

<p><strong>2. 查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 2.查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置</span></span><br><span class="line">  	<span class="comment">/*</span></span><br><span class="line"><span class="comment">   分析：</span></span><br><span class="line"><span class="comment">     1. 员工编号，员工姓名，工资 emp  </span></span><br><span class="line"><span class="comment">        职务名称，职务描述 job  </span></span><br><span class="line"><span class="comment">        部门名称，部门位置 dept</span></span><br><span class="line"><span class="comment">     2. 条件： emp.job_id = job.id and emp.dept_id = dept.id</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">SELECT</span> </span><br><span class="line">  		t1.<span class="string">`id`</span>, <span class="comment">-- 员工编号</span></span><br><span class="line">  		t1.<span class="string">`ename`</span>, <span class="comment">-- 员工姓名</span></span><br><span class="line">  		t1.<span class="string">`salary`</span>,<span class="comment">-- 工资</span></span><br><span class="line">  		t2.<span class="string">`jname`</span>, <span class="comment">-- 职务名称</span></span><br><span class="line">  		t2.<span class="string">`description`</span>, <span class="comment">-- 职务描述</span></span><br><span class="line">  		t3.<span class="string">`dname`</span>, <span class="comment">-- 部门名称</span></span><br><span class="line">  		t3.<span class="string">`loc`</span> <span class="comment">-- 部门位置</span></span><br><span class="line">  	<span class="keyword">FROM</span> </span><br><span class="line">  		emp t1, job t2,dept t3</span><br><span class="line">  	<span class="keyword">WHERE</span> </span><br><span class="line">  		t1.<span class="string">`job_id`</span> = t2.<span class="string">`id`</span> <span class="keyword">AND</span> t1.<span class="string">`dept_id`</span> = t3.<span class="string">`id`</span>;</span><br></pre></td></tr></table></figure>
<p><strong>3. 查询员工姓名，工资，工资等级</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3.查询员工姓名，工资，工资等级</span></span><br><span class="line">  	<span class="comment">/*</span></span><br><span class="line"><span class="comment">  	分析：</span></span><br><span class="line"><span class="comment">  	1.员工姓名，工资 emp  </span></span><br><span class="line"><span class="comment">  	  工资等级 salarygrade</span></span><br><span class="line"><span class="comment">  	2.条件 emp.salary &gt;= salarygrade.losalary and emp.salary &lt;= salarygrade.hisalary</span></span><br><span class="line"><span class="comment">          mp.salary BETWEEN salarygrade.losalary and salarygrade.hisalary</span></span><br><span class="line"><span class="comment">  	*/</span></span><br><span class="line">  	<span class="keyword">SELECT</span> </span><br><span class="line">  		t1.ename ,</span><br><span class="line">  		t1.<span class="string">`salary`</span>,</span><br><span class="line">  		t2.*</span><br><span class="line">  	<span class="keyword">FROM</span> emp t1, salarygrade t2</span><br><span class="line">  	<span class="keyword">WHERE</span> t1.<span class="string">`salary`</span> <span class="keyword">BETWEEN</span> t2.<span class="string">`losalary`</span> <span class="keyword">AND</span> t2.<span class="string">`hisalary`</span>;</span><br><span class="line">  	</span><br><span class="line">  	<span class="comment">-- 或者</span></span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">        e.ename 员工姓名,</span><br><span class="line">        e.salary 工资,</span><br><span class="line">        s.grade 工资登记</span><br><span class="line">    <span class="keyword">FROM</span> salarygrade s <span class="keyword">INNER</span> <span class="keyword">join</span> emp e <span class="keyword">on</span> e.salary&gt;s.losalary <span class="keyword">AND</span> e.salary&lt;s.hisalary;</span><br></pre></td></tr></table></figure>
<p><strong>4. 查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 4.查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</span></span><br><span class="line">  	<span class="comment">/*</span></span><br><span class="line"><span class="comment">  	分析：</span></span><br><span class="line"><span class="comment">    1. 员工姓名，工资 emp ， 职务名称，职务描述 job 部门名称，部门位置，dept  工资等级 salarygrade</span></span><br><span class="line"><span class="comment">    2. 条件： emp.job_id = job.id and emp.dept_id = dept.id and emp.salary BETWEEN salarygrade.losalary and salarygrade.hisalary</span></span><br><span class="line"><span class="comment">  	*/</span></span><br><span class="line">  	<span class="keyword">SELECT</span> </span><br><span class="line">  		t1.<span class="string">`ename`</span>,</span><br><span class="line">  		t1.<span class="string">`salary`</span>,</span><br><span class="line">  		t2.<span class="string">`jname`</span>,</span><br><span class="line">  		t2.<span class="string">`description`</span>,</span><br><span class="line">  		t3.<span class="string">`dname`</span>,</span><br><span class="line">  		t3.<span class="string">`loc`</span>,</span><br><span class="line">  		t4.<span class="string">`grade`</span></span><br><span class="line">  	<span class="keyword">FROM</span> </span><br><span class="line">  		emp t1,job t2,dept t3,salarygrade t4</span><br><span class="line">  	<span class="keyword">WHERE</span> </span><br><span class="line">  		t1.<span class="string">`job_id`</span> = t2.<span class="string">`id`</span> </span><br><span class="line">  		<span class="keyword">AND</span> t1.<span class="string">`dept_id`</span> = t3.<span class="string">`id`</span></span><br><span class="line">  		<span class="keyword">AND</span> t1.<span class="string">`salary`</span> <span class="keyword">BETWEEN</span> t4.<span class="string">`losalary`</span> <span class="keyword">AND</span> t4.<span class="string">`hisalary`</span>;</span><br></pre></td></tr></table></figure>

<p><strong>5. 查询出部门编号、部门名称、部门位置、部门人数</strong>      </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 5.查询出部门编号、部门名称、部门位置、部门人数  	</span></span><br><span class="line">  	<span class="comment">/*</span></span><br><span class="line"><span class="comment">  	分析：</span></span><br><span class="line"><span class="comment">  	1.部门编号、部门名称、部门位置 dept 表。 </span></span><br><span class="line"><span class="comment">  	  部门人数 emp表</span></span><br><span class="line"><span class="comment">  	2.使用分组查询。按照emp.dept_id完成分组，查询count(id) 多行多列的表</span></span><br><span class="line"><span class="comment">  	3.使用子查询将第2步的查询结果和dept表进行关联查询		</span></span><br><span class="line"><span class="comment">  	*/</span></span><br><span class="line">  <span class="keyword">SELECT</span> </span><br><span class="line">	d.id 部门编号,</span><br><span class="line">	d.dname 部门名称,</span><br><span class="line">	d.loc 部门位置,</span><br><span class="line">	total_number 部门人数</span><br><span class="line"><span class="keyword">FROM</span> dept d,</span><br><span class="line">     (<span class="keyword">SELECT</span> </span><br><span class="line">		e.dept_id,</span><br><span class="line">	    <span class="keyword">COUNT</span>(e.dept_id) total_number</span><br><span class="line">      <span class="keyword">FROM</span> emp e</span><br><span class="line">      <span class="keyword">GROUP</span> <span class="keyword">BY</span> e.dept_id) t</span><br><span class="line"><span class="keyword">WHERE</span> d.id=t.dept_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 或者</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  d.id 部门编号,</span><br><span class="line">  d.dname 部门名称,</span><br><span class="line">  d.loc 部门位置,</span><br><span class="line">  <span class="keyword">COUNT</span>(e.dept_id) 部门人数</span><br><span class="line"><span class="keyword">FROM</span> emp e, dept d</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> e.dept_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">--或者</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  d.id 部门编号,</span><br><span class="line">  d.dname 部门名称,</span><br><span class="line">  d.loc 部门位置,</span><br><span class="line">  <span class="keyword">COUNT</span>(e.dept_id) 部门人数</span><br><span class="line"><span class="keyword">FROM</span> emp e <span class="keyword">INNER</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.dept_id= d.id </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> e.dept_id;</span><br></pre></td></tr></table></figure>
<p><strong>6.查询所有员工的姓名及其直接上级的姓名,没有领导的员工也需要查询</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 6.查询所有员工的姓名及其直接上级的姓名,没有领导的员工也需要查询</span></span><br><span class="line">  	<span class="comment">/*</span></span><br><span class="line"><span class="comment">  	分析：</span></span><br><span class="line"><span class="comment">  	1.姓名 emp， 直接上级的姓名 emp</span></span><br><span class="line"><span class="comment">    emp表的id 和 mgr 是自关联</span></span><br><span class="line"><span class="comment">	2.条件 emp.id = emp.mgr</span></span><br><span class="line"><span class="comment">	3.查询左表的所有数据，和 交集数据</span></span><br><span class="line"><span class="comment">	使用左外连接查询</span></span><br><span class="line"><span class="comment">  	*/</span></span><br><span class="line">  	<span class="keyword">select</span></span><br><span class="line">  		t1.ename,</span><br><span class="line">  		t1.mgr,</span><br><span class="line">  		t2.<span class="string">`id`</span>,</span><br><span class="line">  		t2.ename</span><br><span class="line">  	<span class="keyword">from</span> emp t1, emp t2</span><br><span class="line">  	<span class="keyword">where</span> t1.mgr = t2.<span class="string">`id`</span>;</span><br><span class="line">  	</span><br><span class="line">  	<span class="keyword">SELECT</span> </span><br><span class="line">  		t1.ename,</span><br><span class="line">  		t1.mgr,</span><br><span class="line">  		t2.<span class="string">`id`</span>,</span><br><span class="line">  		t2.<span class="string">`ename`</span></span><br><span class="line">  	<span class="keyword">FROM</span> emp t1</span><br><span class="line">  	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> emp t2</span><br><span class="line">  	<span class="keyword">ON</span> t1.<span class="string">`mgr`</span> = t2.<span class="string">`id`</span>;</span><br></pre></td></tr></table></figure>



<h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><h2 id="事务的基本介绍"><a href="#事务的基本介绍" class="headerlink" title="事务的基本介绍"></a>事务的基本介绍</h2><h3 id="什么是事务："><a href="#什么是事务：" class="headerlink" title="什么是事务："></a>什么是事务：</h3><blockquote>
<ol>
<li>在实际的开发过程中，一个业务操作如：转账，往往是要多次访问数据库才能完成的。转账是一个用户扣钱，另一个用户加钱。如果其中有一条SQL语句出现异常，这条SQL就可能执行失败。</li>
<li>事务执行是一个整体，所有的SQL语句都必须执行成功。如果其中有1条SQL语句出现异常，则所有的SQL语句都要回滚，整个业务执行失败</li>
<li>如果一个包含多个步骤的业务操作，被事务管理，那么这些操作要么同时成功，要么同时失败。</li>
</ol>
</blockquote>
<h3 id="操作："><a href="#操作：" class="headerlink" title="操作："></a>操作：</h3><ol>
<li>开启事务：<code>start transaction</code>;</li>
<li>回滚：<code>rollback</code>;</li>
<li>提交：<code>commit</code>;</li>
</ol>
<h3 id="例子：转账的操作"><a href="#例子：转账的操作" class="headerlink" title="例子：转账的操作"></a>例子：转账的操作</h3><h4 id="数据准备-1"><a href="#数据准备-1" class="headerlink" title="数据准备"></a>数据准备</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">account</span> (</span><br><span class="line">  <span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="keyword">NAME</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">  balance <span class="keyword">DOUBLE</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 添加数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">account</span> (<span class="keyword">NAME</span>, balance) <span class="keyword">VALUES</span> (<span class="string">'zhangsan'</span>, <span class="number">1000</span>), (<span class="string">'lisi'</span>, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<h4 id="模拟操作"><a href="#模拟操作" class="headerlink" title="模拟操作"></a>模拟操作</h4><p><strong>张三给李四转500元钱，一个转账的业务操作最少要执行下面的2条语句：</strong></p>
<ol>
<li>张三账号-500</li>
<li>李四账号+500</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">account</span> (<span class="keyword">name</span>, balance) 	<span class="keyword">VALUES</span> (<span class="string">'张三'</span>,<span class="number">1000</span>), (<span class="string">'李四'</span>,<span class="number">1000</span>);</span><br><span class="line">	</span><br><span class="line"><span class="comment">-- 1.张三给李四转500</span></span><br><span class="line"><span class="comment">-- 1.1 张三账号-500</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> balance=balance<span class="number">-500</span> <span class="keyword">WHERE</span> <span class="keyword">name</span>=<span class="string">'张三'</span>;</span><br><span class="line"><span class="comment">-- 1.2 李四账号+500</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> balance=balance+<span class="number">500</span> <span class="keyword">WHERE</span> <span class="keyword">name</span>=<span class="string">'李四'</span>;</span><br></pre></td></tr></table></figure>

<p><strong>问题：</strong></p>
<p>假设当张三账号上-500元,服务器崩溃了。李四的账号并没有+500元，数据就出现问题了。我们需要保证其中一条SQL语句出现问题，整个转账就算失败。只有两条SQL都成功了转账才算成功。这个时候就需要用到事务</p>
<h3 id="事务提交的两种方式："><a href="#事务提交的两种方式：" class="headerlink" title="事务提交的两种方式："></a>事务提交的两种方式：</h3><ul>
<li><strong>自动提交</strong>：<ul>
<li><code>mysql</code>就是自动提交的</li>
<li>一条<code>DML(增删改)语句</code>会自动提交一次事务。</li>
</ul>
</li>
<li><strong>手动提交</strong>：<ul>
<li><code>Oracle</code>数据库默认是手动提交事务</li>
<li>需要先开启事务，再提交</li>
</ul>
</li>
</ul>
<h4 id="手动提交事务的SQL语句"><a href="#手动提交事务的SQL语句" class="headerlink" title="手动提交事务的SQL语句"></a>手动提交事务的SQL语句</h4><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201125161552.png" style="zoom:80%;" />



<h5 id="手动提交事务使用过程"><a href="#手动提交事务使用过程" class="headerlink" title="手动提交事务使用过程"></a>手动提交事务使用过程</h5><ol>
<li>执行成功的情况： <code>开启事务</code>-&gt; <code>执行多条SQL语句</code> -&gt; <code>成功提交事务</code></li>
<li>执行失败的情况： <code>开启事务</code>-&gt; <code>执行多条SQL语句</code> -&gt;<code>事务的回滚</code></li>
</ol>
<img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201125161919.png" style="zoom: 50%;" />



<h5 id="案例演示1：事务提交"><a href="#案例演示1：事务提交" class="headerlink" title="案例演示1：事务提交"></a>案例演示1：事务提交</h5><p>模拟张三给李四转500元钱（成功） 目前数据库数据如下：</p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201125162343.png" alt=""></p>
<ul>
<li><p>执行完 1.开启事务， 2.张三账号-500， 3.李四账号+500发现数据并没有变化</p>
</li>
<li><p>执行commit提交事务之后，数据发生变化</p>
</li>
</ul>
<h5 id="案例演示2：事务回滚"><a href="#案例演示2：事务回滚" class="headerlink" title="案例演示2：事务回滚"></a>案例演示2：事务回滚</h5><p>模拟张三给李四转500元钱（失败） 目前数据库数据如下：</p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201125162343.png" alt=""></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">account</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> balance = <span class="number">1000</span>;</span><br><span class="line"><span class="comment">-- 张三给李四转账 500 元</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">account</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> balance = <span class="number">1000</span>;</span><br><span class="line"><span class="comment">-- 张三给李四转账 500 元</span></span><br><span class="line"><span class="comment">-- 0. 开启事务</span></span><br><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span>;</span><br><span class="line"><span class="comment">-- 1. 张三账户 -500</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> balance = balance - <span class="number">500</span> <span class="keyword">WHERE</span> <span class="keyword">NAME</span> = <span class="string">'zhangsan'</span>;</span><br><span class="line"><span class="comment">-- 2. 李四账户 +500</span></span><br><span class="line"><span class="comment">-- 出错了...</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> balance = balance + <span class="number">500</span> <span class="keyword">WHERE</span> <span class="keyword">NAME</span> = <span class="string">'lisi'</span>;</span><br><span class="line"><span class="comment">-- 发现执行没有问题，提交事务</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"><span class="comment">-- 发现出问题了，回滚事务</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>

<h5 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h5><blockquote>
<p>如果事务中SQL语句没有问题，commit提交事务，会对数据库数据的数据进行改变。 如果事务中SQL语句有问题，rollback回滚事务，会回退到开启事务时的状态。</p>
</blockquote>
<h4 id="自动提交事务"><a href="#自动提交事务" class="headerlink" title="自动提交事务"></a>自动提交事务</h4><p>MySQL默认<code>每一条DML(增删改)语句</code>都是一个单独的事务，每条语句都会自动开启一个事务，语句执行完毕自动提交事务，MySQL<code>默认开始自动提交事务</code></p>
<h4 id="修改事务的默认提交方式："><a href="#修改事务的默认提交方式：" class="headerlink" title="修改事务的默认提交方式："></a>修改事务的默认提交方式：</h4><ul>
<li><p>查看事务的默认提交方式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @@autocommit; <span class="comment">-- 1 代表自动提交  0 代表手动提交</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改默认提交方式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @@autocommit = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="事务原理"><a href="#事务原理" class="headerlink" title="事务原理"></a>事务原理</h3><p>事务开启之后, 所有的操作都会临时保存到<code>事务日志</code>中, 事务日志只有在得到<code>commit命令</code>才会同步到数据表中，其他任何情况都会清空事务日志(rollback，断开连接)</p>
<h4 id="原理图："><a href="#原理图：" class="headerlink" title="原理图："></a>原理图：</h4><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201125164107.png" style="zoom:80%;" />

<h4 id="事务的步骤："><a href="#事务的步骤：" class="headerlink" title="事务的步骤："></a>事务的步骤：</h4><ol>
<li>客户端连接数据库服务器，创建连接时创建此用户临时日志文件</li>
<li>开启事务以后，所有的操作都会先写入到临时日志文件中</li>
<li>所有的查询操作从表中查询，但会经过日志文件加工后才返回</li>
<li>如果事务提交则将日志文件中的数据写到表中，否则清空日志文件。</li>
</ol>
<h3 id="回滚点"><a href="#回滚点" class="headerlink" title="回滚点"></a>回滚点</h3><h4 id="什么是回滚点"><a href="#什么是回滚点" class="headerlink" title="什么是回滚点"></a>什么是回滚点</h4><blockquote>
<p>在某些成功的操作完成之后，后续的操作有可能成功有可能失败，但是不管成功还是失败，前面操作都已经成功，可以在当前成功的位置设置一个回滚点。可以供后续失败操作返回到该位置，而不是返回所有操作，这个点称之为回滚点。</p>
</blockquote>
<h4 id="回滚点的操作语句"><a href="#回滚点的操作语句" class="headerlink" title="回滚点的操作语句"></a>回滚点的操作语句</h4><p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201125164629.png" alt=""></p>
<h4 id="具体操作："><a href="#具体操作：" class="headerlink" title="具体操作："></a>具体操作：</h4><ol>
<li>将数据还原到1000</li>
<li>开启事务</li>
<li>让张三账号减3次钱，每次10块</li>
<li>设置回滚点：savepoint three_times;</li>
<li>让张三账号减4次钱，每次10块</li>
<li>回到回滚点：rollback to three_times;</li>
<li>分析执行过程</li>
</ol>
<h4 id="总结：-1"><a href="#总结：-1" class="headerlink" title="总结："></a>总结：</h4><blockquote>
<p>设置回滚点可以让我们在失败的时候回到回滚点，而不是回到事务开启的时</p>
</blockquote>
<h2 id="事务的四大特征："><a href="#事务的四大特征：" class="headerlink" title="事务的四大特征："></a>事务的四大特征：</h2><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201125165622.png" style="zoom:80%;" />

<ol>
<li><code>原子性</code>：是不可分割的最小操作单位，要么同时成功，要么同时失败。</li>
<li><code>持久性</code>：当事务提交或回滚后，数据库会持久化的保存数据。</li>
<li><code>隔离性</code>：多个事务之间。相互独立。</li>
<li><code>一致性</code>：事务操作前后，数据总量不变</li>
</ol>
<h2 id="事务的隔离级别（了解）"><a href="#事务的隔离级别（了解）" class="headerlink" title="事务的隔离级别（了解）"></a>事务的隔离级别（了解）</h2><h3 id="概念：-2"><a href="#概念：-2" class="headerlink" title="概念："></a>概念：</h3><blockquote>
<p>多个事务之间隔离的，相互独立的。但是如果多个事务操作同一批数据，则会引发一些问题，设置不同的隔离级别就可以解决这些问题。</p>
</blockquote>
<h3 id="存在问题："><a href="#存在问题：" class="headerlink" title="存在问题："></a>存在问题：</h3><p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201125165655.png" alt=""></p>
<ol>
<li><p><code>脏读</code>：一个事务，读取到另一个事务中没有提交的数据</p>
<p>脏读非常危险的，比如张三向李四购买商品，张三开启事务，向李四账号转入500块，然后打电话给李四说钱已经转了。李四一查询钱到账了，发货给张三。张三收到货后回滚事务，李四的再查看钱没了。</p>
</li>
<li><p><code>不可重复读(虚读)</code>：在同一个事务中，两次读取到的数据不一样。</p>
<p>两次查询输出的结果不同，到底哪次是对的？不知道以哪次为准。 很多人认为这种情况就对了，无须困惑，当然是后面的为准。我们可以考虑这样一种情况，比如银行程序需要将查询结果分别输出到电脑屏幕和发短信给客户，结果在一个事务中针对不同的输出目的地进行的两次查询不一致，导致文件和屏幕中的结果不一致，银行工作人员就不知道以哪个为准了。</p>
<p><strong>结论：同一个事务中为了保证多次查询数据一致，必须使用repeatable read隔离级别</strong></p>
</li>
<li><p><code>幻读</code>：一个事务操作(DML)数据表中所有记录，另一个事务添加了一条数据，则第一个事务查询不到自己的修改。</p>
</li>
</ol>
<h3 id="隔离级别："><a href="#隔离级别：" class="headerlink" title="隔离级别："></a>隔离级别：</h3><p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201125165909.png" alt=""></p>
<ol>
<li><p><code>read uncommitted</code>：读未提交</p>
<p>产生的问题：脏读、不可重复读、幻读</p>
</li>
<li><p><code>read committed</code>：读已提交 （Oracle）</p>
<p>产生的问题：不可重复读、幻读</p>
</li>
<li><p><code>repeatable read</code>：可重复读 （MySQL默认）</p>
<p>产生的问题：幻读</p>
</li>
<li><p><code>serializable</code>：串行化</p>
<p>可以解决所有的问题</p>
</li>
</ol>
<p><strong>注意：隔离级别从小到大安全性越来越高，但是效率越来越低</strong></p>
<p><strong>数据库查询隔离级别</strong>：<code>select @@tx_isolation;</code></p>
<p><strong>数据库设置隔离级别</strong>：<code>set global transaction isolation level  级别字符串;</code></p>
<h3 id="演示："><a href="#演示：" class="headerlink" title="演示："></a>演示：</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> <span class="keyword">transaction</span> <span class="keyword">isolation</span> <span class="keyword">level</span> <span class="keyword">read</span> uncommitted;</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;</span><br><span class="line"><span class="comment">-- 转账操作</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">account</span> <span class="keyword">set</span> balance = balance - <span class="number">500</span> <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">account</span> <span class="keyword">set</span> balance = balance + <span class="number">500</span> <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>



</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">LF_Tech</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://feiliutech.github.io/posts/9977/">https://feiliutech.github.io/posts/9977/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://feiliutech.github.io" target="_blank">LF_Techの博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a></div><div class="post_share"><div class="addthis_inline_share_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=null" async="async"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/23591/"><img class="prev-cover" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201112161213.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JDBC</div></div></a></div><div class="next-post pull-right"><a href="/posts/28665/"><img class="next-cover" data-src="https://cdn.jsdelivr.net/gh/feiLiuTech/imgbed@main/GitLearning/20201112161213.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java注解</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020  <i id="heartbeat" class="fa fas fa-heartbeat"></i> LF_Tech</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div><head><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><meta name="generator" content="Hexo 4.2.0"></head></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/calendar.js"></script><script src="/js/languages.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":120,"height":260},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>